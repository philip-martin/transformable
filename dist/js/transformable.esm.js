var t=function(t,e){void 0===e&&(e=t),this.x=t,this.y=e};t.prototype={scale:function(e){return new t(this.x*e,this.y*e)},round:function(e){e=e?Math.pow(10,e):1;return new t(Math.round(this.x*e)/e,Math.round(this.y*e)/e)},sub:function(e){return new t(this.x-e.x,this.y-e.y)},add:function(e){return new t(this.x+e.x,this.y+e.y)},mult:function(e){return new t(this.x*e.x,this.y*e.y)},divide:function(e){return new t(this.x/e.x,this.y/e.y)},nonzero:function(){return 0!=this.x||0!=this.y},equals:function(t){return this.x===t.x&&this.y===t.y},moreoreq:function(t){return{x:this.x>=t.x,y:this.y>=t.y}},lessoreq:function(t){return{x:this.x<=t.x,y:this.y<=t.y}},dot:function(t){return this.x*t.x+this.y*t.y},perpOnLine:function(e,n){var r=((n.y-e.y)*(this.x-e.x)-(n.x-e.x)*(this.y-e.y))/(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2)),o=this.x-r*(n.y-e.y),s=this.y+r*(n.x-e.x);return new t(o,s)},mag:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}};const e=t;var n=function(t){if(null==t||void 0===t)return n.Identity();if(t instanceof Array)this.elements=t.slice(0);else if(t instanceof n)this.elements=t.elements.slice(0);else{if(6!=arguments.length)throw new Error("Can't create Matrix from supplied arguments. Array of 6 elements, Matrix or nothing only.");this.elements=[];for(var e=0;e<arguments.length;)this.elements.push(arguments[e++])}return this.history={undo:[],redo:[]},this};n.Identity=function(){return new n([1,0,0,1,0,0])},n.prototype={transformpoint:function(t){var n=this.elements;return new e(t.x*n[0]+t.y*n[2]+n[4],t.x*n[1]+t.y*n[3]+n[5])},multiply:function(t){var e=this.elements,n=e[0],r=e[1],o=e[2],s=e[3],i=e[4],a=e[5],l=t[0],h=t[1],p=t[2],c=t[3],f=t[4],m=t[5];return this.elements=[n*l+o*h,r*l+s*h,n*p+o*c,r*p+s*c,n*f+o*m+i,r*f+s*m+a],this},elementsequal:function(t,e){return!(!t||!e)&&(t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3]&&t[4]==e[4]&&t[5]==e[5])},save:function(t){var e,n=this.history,r="string"==typeof t&&t;if(t&&!r||(t=this.elements),e=n.undo[n.undo.length-1],this.elementsequal(t,e))r&&(n.undo[r]=e);else{var o=n.undo.push(t.slice(0));n.redo=[],r&&(n.undo[r]=n.undo[o-1])}},undo:function(t){var e=this.history.undo,n=(e.length,e.pop()),r="string"==typeof t?e[t]:e[e.length-1];n&&this.history.redo.unshift(n),this.elements=r?r.slice(0):this.identity()},redo:function(){var t=this.history.redo,e=(t.length,t.pop()),n=t[t.length-1];e&&this.history.undo.unshift(e),this.elements=n?n.slice(0):this.identity()},reset:function(){return this.elements=this.identity(),this},determinant:function(){var t=this.elements;return t[0]*t[3]-t[1]*t[2]},inverse:function(){var t=this.elements,e=this.identity(),r=this.determinant();if(r<1e-14)throw"Matrix not invertible.";return e[0]=t[3]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[0]/r,e[4]=(t[2]*t[5]-t[3]*t[4])/r,e[5]=-(t[0]*t[5]-t[1]*t[4])/r,new n(e)},invert:function(){return this.multiply(this.inverse().elements)},identity:function(){return[1,0,0,1,0,0]},isIdentity:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]},translate:function(t,n){return t instanceof e&&!n?this.multiply([1,0,0,1,t.x,t.y]):this.multiply([1,0,0,1,t,n])},scale:function(t,e){this.multiply([e,0,0,e,0,0]);var n=t.sub(t.scale(e)).scale(1/e);return this.translate(n)},rotateAboutPoint:function(t,e){var n=e*Math.PI/180;return this.multiply([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),t.x-Math.cos(n)*t.x- -Math.sin(n)*t.y,t.y-Math.sin(n)*t.x-Math.cos(n)*t.y])},rotate:function(t,n){if(t instanceof e)return this.rotateAboutPoint(t,n);var r=t*Math.PI/180;return this.multiply([Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0])},normaldegree:function(t){return t<0?t+360:t},rotation:function(t){var e=this.elements,n=180*Math.atan2(e[1],e[0])/Math.PI;return t?this.normaldegree(n):n},scaling:function(){return Math.sqrt(Math.pow(this.elements[0],2)+Math.pow(this.elements[1],2))},translation:function(){return new e(this.elements[4],this.elements[5])}};const r=n;var o=function(t){this.Items=[],this._add(t,t.element),this.Self=t,this._init()};o.prototype._getScroll=function(){return new e(window.pageXOffset||document.documentElement.scrollLeft,window.pageYOffset||document.documentElement.scrollTop)},o.prototype.GetElementSize=function(t,n){n=n||getComputedStyle(t);var r=parseFloat(n.left),o=parseFloat(n.top),s=parseFloat(n.width),i=parseFloat(n.height);return{offset:new e(r||0,o||0),width:s,height:i,topleft:new e(0,0),topright:new e(s,0),bottomright:new e(s,i),bottomleft:new e(0,i)}},o.prototype._debug=function(){this.Items.forEach(function(t,e){console.log(t.matrix.elements)}),this.Items.forEach(function(t,e){console.log([t.element])})},o.prototype.Refresh=function(){this.Items=[],this._add(this.Self,this.Self.element),this.Init()},o.prototype._ispercent=function(t){return t.indexOf("%")>-1},o.prototype._isauto=function(t){return"auto"==t},o.prototype._pixelFromParent=function(t,e,n){if("0%"===e)return 0;var r=parseFloat(e);switch(t){case"left":r=parseFloat(n.width)*r/100;break;case"top":r=parseFloat(n.height)*r/100}return r},o.prototype.GetComputedDims=function(t){var e,n,r,o=getComputedStyle(t),s=o.left,i=o.top,a=o.marginTop,l=o.marginLeft,h=this._ispercent(s),p=this._ispercent(i),c=function(t){return parseFloat(t)};return this._isauto(s)&&(s=0),this._isauto(i)&&(i=0),(h||p)&&(r=getComputedStyle(t.parentNode)),h&&(e=this._pixelFromParent("left",s,r)),p&&(n=this._pixelFromParent("top",i,r)),{left:void 0!==e?e:c(s),top:void 0!==n?n:c(i),marginLeft:c(l),marginTop:c(a),transform:o.transform}},o.prototype._init=function(){for(var t,e,n,o=this.Self.element;o.parentNode&&!o.parentNode.body;){var s,i=(s=this.GetComputedDims(o.parentNode)).transform,a=/matrix\(\-?[0-9]+[^\)]+\)/.test(i),l=s.top,h=s.left,p=s.marginTop,c=s.marginLeft;if(a||o.parentNode.classList.contains("transformable")||o.classList.contains("transformable")||0!=l||0!=h||0!=p||0!=c)if(e=o.parentNode.getAttribute("data-transformable-id"))(t=Transformable.Instance[e])&&this._add(t);else{var f=!!a&&new r(this.Self._cssStringToArray(i));if(a||0!=l||0!=h||0!=p||0!=c||o.classList.contains("transformable")){(n=new r).translate(h||0,l||0).translate(c||0,p||0),f&&n.multiply(f.elements);var m=this.GetElementSize(o.parentNode);o.parentNode.style.top=0,o.parentNode.style.left=0,o.parentNode.style.marginLeft=0,o.parentNode.style.marginTop=0,o.parentNode.style.transformOrigin="0 0",o.parentNode.style.transform=this.Self._arrayToCssString(n.elements),this._add(n,o.parentNode,m)}}o=o.parentNode}},o.prototype._setoffset=function(){if(this.scroll=this._getScroll(),!this.offset){var t,e,n=new r;for(e=0;e<this.Items.length;e++)n.translate(this.Items[e].matrix.translation());for(e=0;e<this.Items.length;e++)if((t=this.Items[e]).element.classList.contains("transformable")){this.offset=t.transformable.offset.sub(n.translation());break}}},o.prototype._add=function(t,e){t instanceof Transformable&&this.Items.unshift({matrix:t.matrix,element:e||t.element,rect:t.sizes.element.initial,transformable:t}),t instanceof r&&this.Items.unshift({matrix:t,element:e,rect:this.GetElementSize(e)})},o.prototype.GetParents=function(){var t=[];return this.Items.forEach(function(e,n){var r,o=e.transformable;o||(r=e.element.getAttribute("data-transformable-id"))&&(o=Transformable.Instance[r],e.transformable=o);var s=o?o.matrix:e.matrix;t.push({Matrix:s,Inverse:s.inverse(),Element:e.element})}),t},o.prototype.TransformCorners=function(t){var e=this.GetMatrix();return{bottomright:e.transformpoint(t.bottomright),bottomleft:e.transformpoint(t.bottomleft),topright:e.transformpoint(t.topright),topleft:e.transformpoint(t.topleft)}},o.prototype.FirstParent=function(){var t=this.Items,e=t.length;return e>1&&t[e-2]},o.prototype.GetMatrix=function(){var t=r.Identity();return this.Items.forEach(function(e,n){t.multiply(e.matrix.elements)}),t},o.prototype.OffsetFromPoint=function(t,e){e=e||this.GetParents();this._setoffset();for(var n,o=t,s=r.Identity().translate(this.offset),i=0;i<e.length;i++)n=e[i],s.multiply(n.Matrix.elements);return o=s.inverse().transformpoint(o)};const s=o;!function(t,e){var n,r,o="";function s(e,s,i,a){e[n](o+s,"wheel"==r?i:function(e){!e&&(e=t.event);var n={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaY:0,deltaZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation?e.stopPropagation():e.returnValue=!1}};return"mousewheel"==r?(n.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(n.deltaX=-1/40*e.wheelDeltaX)):n.deltaY=e.detail,i(n)},a||!1)}t.addEventListener?n="addEventListener":(n="attachEvent",o="on"),r="onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll",t.addWheelListener=function(t,e,n){s(t,r,e,n),"DOMMouseScroll"==r&&s(t,"MozMousePixelScroll",e,n)}}(window,document);var i=function(t,e){if(e=e||{},t.length&&(t=t[0]),this.options=e,this.element=t,this.element.classList.add("transformable"),this.parent=t.parentNode,this.setInitialSizes(),e&&e.matrix){var n={x:1,y:1};if(e.computedsize&&(e.computedsize.width||e.computedsize.Width)){var o={width:e.computedsize.width||e.computedsize.Width,height:e.computedsize.height||e.computedsize.Height},a=this.sizes.element.initial;n.x=a.width/o.width,n.y=a.height/o.height}e.matrix instanceof Array&&6==e.matrix.length?(e.matrix[4]*=n.x,e.matrix[5]*=n.y,this._setMatrix(new r(e.matrix))):e.matrix instanceof r&&(e.matrix.elements[4]*=n.x,e.matrix.elements[5]*=n.y,this._setMatrix(e.matrix))}this.matrix=this._getMatrix(),this.originalTransition=this._getOriginalTransition(),this.Ancestry=new s(this),this._setOffset(),this.Ancestry._setoffset(),this.dragging=!1,this.start=null,this.orig=null,this.zooma=.001,this.events={start:e.start,move:e.move,stop:e.stop,tap:e.tap,transition:e.transition},this.element.setAttribute("data-transformable-id",i.Instance.push(this)-1),-1==navigator.userAgent.indexOf("Edge")&&this.element.setAttribute("draggable",!1),void 0!==e.attachevents&&!0!==e.attachevents||!1===e.editable||(this._addEvents(),e.resize&&this.createResizeHandles(e.resize),(!e.disable||e.disable&&!e.disable.rotate)&&this.createRotateHandles(),e.handle&&"rotator-box"==e.type&&this._addRotateEvents(e.handle))};i.Instance=[],i.prototype._getOriginalTransition=function(){var t=getComputedStyle(this.element).transition.split(","),e=[];for(var n in t)-1==t[n].indexOf("transform ")&&e.push(t[n]);return e.join(",")},i.prototype.tag=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},i.prototype.createRotateHandles=function(t){if(!t||"rotate"==t){var e=this.tag('<div class="transformable-rotation-box"></div>'),n=this.tag('<svg class="transformable-svg-rotator" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 96 96" style="enable-background:new 0 0 96 96;" xml:space="preserve"><g><circle style="fill:#00A8DF;" cx="48.3" cy="48" r="35.3"/><g><path style="fill:#FFFFFF;" d="M35.2,3.8l4.1,28.5c0.2,1.5,2,2.1,3,1l8.2-8.2c0.7-0.7,1.8-0.7,2.5,0l8.8,8.8c7.8,7.8,9.1,20.2,1.2,28.2l-10,10c-0.7,0.7-1.8,0.7-2.5,0L41,62.6c-1-1-2.8-0.4-3,1l-4.1,28.5c-0.2,1.2,0.8,2.2,2,2l28.5-4.1c1.5-0.2,2.1-2,1-3l-8.9-8.9c-0.7-0.7-0.7-1.8,0-2.5l10-10c9.8-9.8,8.5-25.6-1.2-35.2l-8.8-8.8c-0.7-0.7-0.7-1.8,0-2.5L66.7,8.9c1-1,0.4-2.8-1-3L37.2,1.8C36,1.6,35,2.6,35.2,3.8z"/><g style="opacity:0.5;"><path d="M36.9,1.8c0.1,0,0.2,0,0.3,0l28.5,4.1c1.5,0.2,2.1,2,1,3L56.6,19.1c-0.7,0.7-0.7,1.8,0,2.5l8.8,8.8c9.7,9.7,11,25.5,1.2,35.2l-10,10c-0.7,0.7-0.7,1.8,0,2.5l8.9,8.9c1,1,0.4,2.8-1,3l-28.5,4.1c-0.1,0-0.2,0-0.3,0c-1.1,0-1.9-1-1.8-2.1l4.1-28.5c0.1-1,0.9-1.5,1.8-1.5c0.4,0,0.9,0.2,1.3,0.5l9.5,9.5c0.4,0.4,0.8,0.5,1.3,0.5s0.9-0.2,1.3-0.5l10-10c8-8,6.7-20.3-1.2-28.2L53,25.2c-0.4-0.4-0.8-0.5-1.3-0.5s-0.9,0.2-1.3,0.5l-8.2,8.2c-0.4,0.4-0.8,0.5-1.3,0.5c-0.8,0-1.7-0.6-1.8-1.5L35.2,3.8C35,2.7,35.9,1.8,36.9,1.8 M36.9-0.2c-1.1,0-2.1,0.5-2.9,1.3c-0.7,0.8-1,1.9-0.9,3l4.1,28.5c0.3,1.9,1.9,3.3,3.8,3.3c1,0,2-0.4,2.7-1.1l8.1-8.1l8.7,8.7c7.4,7.4,8,18.6,1.2,25.3l-9.8,9.8l-9.3-9.3c-0.7-0.7-1.7-1.1-2.7-1.1c-1.9,0-3.5,1.4-3.8,3.3l-4.1,28.5c-0.2,1.1,0.2,2.2,0.9,3c0.7,0.8,1.8,1.3,2.9,1.3c0.2,0,0.4,0,0.5,0l28.5-4.1c1.4-0.2,2.6-1.2,3.1-2.6c0.5-1.4,0.1-2.9-0.9-3.9l-8.7-8.7l9.8-9.8c10.2-10.2,9.6-27.2-1.2-38.1l-8.7-8.7l10-10c1-1,1.4-2.5,0.9-3.9c-0.5-1.4-1.6-2.4-3.1-2.6L37.5-0.2C37.3-0.2,37.1-0.2,36.9-0.2L36.9-0.2z"/></g></g></g></svg>'),r=this.tag('<svg class="transformable-svg-anchor" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 96 96" style="enable-background:new 0 0 96 96;" xml:space="preserve"><g><circle style="fill:#00A8DF;" cx="47.6" cy="48.4" r="17.6"/><g><path style="fill:#FFFFFF;" d="M69,46H50V27.2c0-1.4-1.1-2.4-2.5-2.4S45,25.9,45,27.2V46H26.6c-1.4,0-2.4,1.1-2.4,2.5s1.1,2.5,2.4,2.5H45v18.6c0,1.4,1.1,2.4,2.5,2.4s2.5-1.1,2.5-2.4V51h19c1.4,0,2.4-1.1,2.4-2.5S70.3,46,69,46z"/><g style="opacity:0.5;"><path d="M47.5,24.8c1.4,0,2.5,1.1,2.5,2.4V46h19c1.4,0,2.4,1.1,2.4,2.5c0,1.4-1.1,2.5-2.4,2.5H50v18.6c0,1.4-1.1,2.4-2.5,2.4S45,70.9,45,69.6V51H26.6c-1.4,0-2.4-1.1-2.4-2.5c0-1.4,1.1-2.5,2.4-2.5H45V27.2C45,25.9,46.1,24.8,47.5,24.8 M47.5,22.8c-2.5,0-4.5,2-4.5,4.4V44H26.6c-2.5,0-4.4,2-4.4,4.5c0,2.5,2,4.5,4.4,4.5H43v16.6c0,2.5,2,4.4,4.5,4.4s4.5-2,4.5-4.4V53h17c2.5,0,4.4-2,4.4-4.5c0-2.5-2-4.5-4.4-4.5H52V27.2C52,24.8,50,22.8,47.5,22.8L47.5,22.8z"/></g></g></g></svg>'),o=this.tag('<div class="transformable-rotation-line"></div>'),s=this;e.appendChild(o),e.appendChild(r),e.appendChild(n),e.appendChild(this.tag('<div class="transformable-anchor-point"></div>')),"IMG"==this.element.nodeName?this.parent.appendChild(e):this.element.appendChild(e),e.addEventListener("click",function(t){return t.stopPropagation(),!1}),this.rotatorBox=new i(e,{type:"rotator-box",rotatetarget:this,handle:n,disable:{zoom:!0,rotate:!0,resize:!0}});var a=function(){s.rotatorBox&&s.rotatorBox.parent&&s.rotatorBox.parent.classList.remove("transformable-mousedown");var t=document.querySelector("body");s.off(t,"mouseup.rotatormouse")},l=function(t){t.stopPropagation&&t.stopPropagation(),s._resizeTimer&&clearTimeout(s._resizeTimer),this.classList.add("transformable-over"),this.classList.add("transformable-resize-over"),s.Ancestry.Items.forEach(function(t,e){t._overTimer&&clearTimeout(t._overTimer)}),s._overTimer=setTimeout(function(){var t=s.rotatorBox,e=t.Ancestry;e.FirstParent();parseFloat(getComputedStyle(t.element).width)>=32&&t.parent.classList.add("transformable-over-active");var n=e.Items.length;e.Items.forEach(function(t,e){e<n-2&&t.element.classList.remove("transformable-over-active")})},"number"==typeof t?t:1500)},h=this.rotatorBox.parent;this.on(h,"mouseenter.rotatormouse",l),this.on(h,"mouseleave.rotatormouse",function(){s._overTimer&&clearTimeout(s._overTimer),s._resizeTimer=setTimeout(function(){s.element.classList.remove("transformable-resize-over")},500),this.classList.remove("transformable-over-active"),this.classList.remove("transformable-over")}),this.on(h,"mousedown.rotatormouse",function(){this.classList.add("transformable-mousedown");var t=document.querySelector("body");s.on(t,"mouseup.rotatormouse",a)}),this.on(h,"click.rotatormouse",function(){l.apply(this,[0])})}},i.prototype.createResizeHandles=function(t){if("tl-br"==t){var e=this.tag('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-271 394.9 52 52" style="enable-background:new -271 394.9 52 52;" xml:space="preserve"><g><path style="fill:#00A8DF;" d="M-244.9,421L-244.9,421L-244.9,421L-244.9,421L-244.9,421l26,0.1c0-10.8-6.1-20-16-24.1 c-10-4.1-20.8-2-28.4,5.7c-7.6,7.6-9.7,18.5-5.6,28.4c4.2,10,13.4,16,24.2,15.9L-244.9,421z"/><path style="fill:none;stroke:#FFFFFF;stroke-width:3;" d="M-251.6,414.3"/><path style="fill:none;stroke:#FFFFFF;stroke-width:3;" d="M-236.6,414.3"/></g><g><path style="fill:#FFFFFF;" d="M-227,419.5l-7.6-4.4c-1.1-0.6-2.4,0.2-2.4,1.4v1.9h-5.6v-5.5h2c1.2,0,2-1.3,1.4-2.4l-4.4-7.6 c-0.6-1.1-2.1-1.1-2.7,0l-4.4,7.6c-0.6,1.1,0.2,2.4,1.4,2.4h2v5.5h-5.6v-1.9c0-1.2-1.3-2-2.4-1.4l-7.6,4.4c-1.1,0.6-1.1,2.1,0,2.7 l7.6,4.4c1.1,0.6,2.4-0.2,2.4-1.4v-2h5.6v5.6h-2c-1.2,0-2,1.3-1.4,2.4l4.4,7.6c0.6,1.1,2.1,1.1,2.7,0l4.4-7.6 c0.6-1.1-0.2-2.4-1.4-2.4h-2v-5.6h5.6v2c0,1.2,1.3,2,2.4,1.4l7.6-4.4C-225.9,421.7-225.9,420.1-227,419.5z"/><path style="opacity:0.5;fill:#231F20;" d="M-245,402.1c0.5,0,1.1,0.3,1.4,0.8l4.4,7.6c0.6,1.1-0.2,2.4-1.4,2.4h-2v5.5h5.6v-1.9 c0-0.9,0.8-1.6,1.6-1.6c0.3,0,0.5,0.1,0.8,0.2l7.6,4.4c1.1,0.6,1.1,2.1,0,2.7l-7.6,4.4c-0.3,0.1-0.5,0.2-0.8,0.2 c-0.8,0-1.6-0.7-1.6-1.6v-2h-5.6v5.6h2c1.2,0,2,1.3,1.4,2.4l-4.4,7.6c-0.3,0.5-0.8,0.8-1.4,0.8c-0.5,0-1.1-0.3-1.4-0.8l-4.4-7.6 c-0.6-1.1,0.2-2.4,1.4-2.4h2v-5.6h-5.6v2c0,0.9-0.8,1.6-1.6,1.6c-0.3,0-0.5-0.1-0.8-0.2l-7.6-4.4c-1.1-0.6-1.1-2.1,0-2.7l7.6-4.4 c0.3-0.1,0.5-0.2,0.8-0.2c0.8,0,1.6,0.7,1.6,1.6v1.9h5.6v-5.5h-2c-1.2,0-2-1.3-1.4-2.4l4.4-7.6C-246.1,402.3-245.5,402.1-245,402.1 M-245,400.6c-1.1,0-2.1,0.6-2.6,1.5l-4.4,7.6c-0.5,0.9-0.5,2.1,0,3c0.5,0.9,1.5,1.5,2.6,1.5h0.5v2.7h-2.7v-0.5c0-1.7-1.4-3-3-3 c-0.5,0-1,0.1-1.5,0.4l-7.6,4.4c-0.9,0.5-1.5,1.5-1.5,2.6c0,1.1,0.6,2.1,1.5,2.6l7.6,4.4c0.5,0.3,1,0.4,1.5,0.4c1.7,0,3-1.4,3-3\tv-0.6h2.7v2.8h-0.5c-1.1,0-2.1,0.6-2.6,1.5c-0.5,0.9-0.5,2.1,0,3l4.4,7.6c0.5,0.9,1.5,1.5,2.6,1.5c1.1,0,2.1-0.6,2.6-1.5l4.4-7.6 c0.5-0.9,0.5-2.1,0-3c-0.5-0.9-1.5-1.5-2.6-1.5h-0.5v-2.8h2.7v0.6c0,1.7,1.4,3,3,3c0.5,0,1-0.1,1.5-0.4l7.6-4.4\tc0.9-0.5,1.5-1.5,1.5-2.6c0-1.1-0.6-2.1-1.5-2.6l-7.6-4.4c-0.5-0.3-1-0.4-1.5-0.4c-1.7,0-3,1.4-3,3v0.5h-2.7v-2.7h0.5\tc1.1,0,2.1-0.6,2.6-1.5c0.5-0.9,0.5-2.1,0-3l-4.4-7.6C-242.9,401.2-243.9,400.6-245,400.6L-245,400.6z"/></g></svg>'),n=this.tag('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-271 394.9 52 52" style="enable-background:new -271 394.9 52 52;" xml:space="preserve"><g><path style="fill:#00A8DF;" d="M-245,420.9L-245,420.9L-245,420.9L-245,420.9L-245,420.9l-26-0.1c0,10.8,6.1,20,16,24.1 c10,4.1,20.8,2,28.4-5.7c7.6-7.6,9.7-18.5,5.6-28.4c-4.2-10-13.4-16-24.2-15.9L-245,420.9z"/></g><g><path style="fill:#FFFFFF;" d="M-245.8,423l-2.5-2.5l-2.1,2.1c-0.9,0.9-2.3,0.5-2.6-0.7l-1.6-9.2c-0.3-1.2,0.8-2.3,1.9-1.9l9.2,1.6 c1.2,0.3,1.6,1.8,0.7,2.6l-2.1,2.1l2.5,2.5l2.7,2.7l-1-1l2.1-2.1c0.9-0.9,2.3-0.5,2.6,0.7l1.6,9.2c0.3,1.2-0.8,2.3-1.9,1.9 l-9.2-1.6c-1.2-0.3-1.6-1.8-0.7-2.6l2.1-2.1l-3.2-3.2L-245.8,423z"/><path style="opacity:0.5;fill:#231F20;" d="M-239.6,422.3l-1-1l2.1-2.1c0.7-0.7,1.7-0.6,2.2,0c0.2,0.2,0.3,0.4,0.4,0.7l1.6,9.2 c0.3,1.2-0.8,2.3-1.9,1.9l-9.2-1.6c-0.3-0.1-0.5-0.2-0.7-0.4c-0.6-0.6-0.7-1.6,0-2.2l2.1-2.1l-3.2-3.2l1.5,1.5l-2.5-2.5l-2.1,2.1 c-0.7,0.7-1.7,0.6-2.2,0c-0.2-0.2-0.3-0.4-0.4-0.7l-1.6-9.2c-0.3-1.2,0.8-2.3,1.9-1.9l9.2,1.6c0.3,0.1,0.5,0.2,0.7,0.4 c0.6,0.6,0.7,1.6,0,2.2l-2.1,2.1l2.5,2.5L-239.6,422.3z M-242.3,417.5l-0.5-0.5l1-1c1.2-1.2,1.2-3.1,0-4.3 c-0.4-0.4-0.8-0.6-1.4-0.8l-9.2-1.6c-1.1-0.3-2.1,0-2.9,0.8c-0.8,0.8-1.1,1.9-0.8,2.9l1.6,9.2c0.1,0.5,0.4,1,0.8,1.4 c1.2,1.2,3.1,1.2,4.3,0l1.1-1.1l0.5,0.5l0.5,0.5l1.2,1.2l-1.1,1.1c-1.2,1.2-1.2,3.1,0,4.3c0.4,0.4,0.8,0.6,1.4,0.8l9.2,1.6 c1.1,0.3,2.1,0,2.9-0.8c0.8-0.8,1.1-1.9,0.8-2.9l-1.6-9.2c-0.1-0.5-0.4-1-0.8-1.4c-1.2-1.2-3.1-1.2-4.3,0l-1,1l-1.2-1.2"/></g></svg>'),r=this.tag('<div class="transformable-resize-button"></div>'),o=r.cloneNode();r.classList.add("tl"),r.appendChild(e),o.classList.add("br"),o.appendChild(n),this.resizertl=r,this.resizerbr=o,this.element.appendChild(r),this.element.appendChild(o),this._addResizeEvents(r,o)}},i.prototype.zoom=function(t){var e=this.Ancestry.OffsetFromPoint(this._findCentreInWindow());return this.scale(e,1+.05*t),this},i.prototype.scale=function(t,e){return this.matrix.scale(t,e),this.setTransition(!0),this._updateElement(),this},i.prototype.translate=function(t,e,n){return this.matrix.translate(t,e),this.setTransition(n),this._updateElement(),this},i.prototype.rotate=function(t,n,r,o){return t instanceof e&&t&&void 0!==t||(t=this.Ancestry.OffsetFromPoint(this._findCentreInWindow())),t instanceof e&&o&&(t=this.Ancestry.OffsetFromPoint(t)),this.matrix.rotate(t,n),this.lastrotationpoint=t,void 0!==r&&!1!==r||this.setTransition(!1),this._updateElement(),this},i.prototype.straighten=function(){var t=this.matrix.rotation();return this.rotate(new e(this.sizes.element.initial.width/2,this.sizes.element.initial.height/2),-t,!0),this},i.prototype.fittoparent=function(){var t=new e(this.sizes.element.initial.width,this.sizes.element.initial.height),n=this.Ancestry,r=n.GetParents(),o=n.FirstParent().rect,s=this.matrix.inverse(),i=s.transformpoint(o.topleft),a=s.transformpoint(o.topright),l=s.transformpoint(o.bottomleft),h=(s.transformpoint(o.bottomright),new e(this._distanceBetweenPoints(i,a),this._distanceBetweenPoints(i,l)).divide(t)),p=Math.min(h.x,h.y);return this.scale(new e(0,0),p),this.centreinparent(!0,r),this.straighten(),this},i.prototype.filltoparent=function(){var t=new e(this.sizes.element.initial.width,this.sizes.element.initial.height),n=this.Ancestry,r=n.GetParents(),o=n.FirstParent().rect,s=this.matrix.inverse(),i=s.transformpoint(o.topleft),a=s.transformpoint(o.topright),l=s.transformpoint(o.bottomleft),h=(s.transformpoint(o.bottomright),new e(this._distanceBetweenPoints(i,a),this._distanceBetweenPoints(i,l)).divide(t)),p=Math.max(h.x,h.y);return this.scale(new e(0,0),p),this.centreinparent(!0,r),this.straighten(),this},i.prototype._getRect=function(t){return t.getBoundingClientRect()},i.prototype.reset=function(t){if(this.InitialMatrix?this.matrix.elements=this.InitialMatrix.slice(0):this.matrix.reset(),this.setTransition(void 0===t||t),this.transition){var e=this;this.delta&&(this.delta.x||this.delta.y)&&(this.element.classList.add("transformable-reset"),this.on(this.element,"transitionend.reset",function(){this.classList.remove("transformable-reset"),e.off(this,"transitionend.reset")}))}return this._updateElement(),this},i.prototype.hasHistoryKey=function(t){return this.matrix.history.undo[t]instanceof Array},i.prototype.undo=function(t){return this.matrix.undo(t),this.setTransition(!0),this._updateElement(),this},i.prototype.redo=function(){return this.matrix.redo(),this.setTransition(!0),this._updateElement(),this},i.prototype.setInitialSizes=function(){if(!this.sizes){var t=window.getComputedStyle(this.element),n=parseFloat(t.width),r=parseFloat(t.height),o=parseFloat(t.left),s=parseFloat(t.top);this.sizes={element:{initial:{offset:new e(o,s),width:n,height:r,topleft:new e(0,0),topright:new e(n,0),bottomright:new e(n,r),bottomleft:new e(0,r)}},window:{width:parseFloat(getComputedStyle(document.body.parentNode).width)}}}},i.prototype._getOffset=function(t){var n=this._getRect(t),r=this.Ancestry._getScroll(),o=getComputedStyle(t),s=new e(parseFloat(o.left),parseFloat(o.top)),i=new e(n.left+r.x,n.top+r.y);return{offset:i,topleft:i,bottomright:new e(n.right,n.bottom),topright:new e(n.right,n.top),bottomleft:new e(n.left,n.bottom),pos:s}},i.prototype._setOffset=function(){if(!this.offset){var t=this._getOffset(this.element,!0);return this.offset=t.offset,void(this.initialoffset=t.offset)}},i.prototype._cssStringToArray=function(t){var e=t.match(/[0-9e., -]+/)[0].split(", ");return e.forEach(function(t,n){e[n]=parseFloat(t)}),e},i.prototype._arrayToCssString=function(t){return"matrix("+t.join(",")+")"},i.prototype._getMatrix=function(t){var e=t||this.element,n=getComputedStyle(e),o=getComputedStyle(this.parent),s=n.transform,i=n.top.indexOf("%")>-1?parseFloat(o.height)*parseFloat(n.top)/100:parseFloat(n.top),a=n.left.indexOf("%")>-1?parseFloat(o.width)*parseFloat(n.left)/100:parseFloat(n.left),l=parseFloat(n.marginTop),h=parseFloat(n.marginLeft),p=parseFloat(n.borderTopWidth),c=parseFloat(n.borderLeftWidth);if(/matrix\(\-?[0-9]+[^\)]+\)/.test(s)){var f=this._cssStringToArray(s);this.InitialMatrix||(this.InitialMatrix=f.slice(0))}f=new r(f||[1,0,0,1,0,0]);this.options.type;return(a||i||l||h||p||c)&&(f.translate(a||0,i||0),f.translate(h||0,l||0),f.translate(c||0,p||0),e.style.marginTop=0,e.style.marginLeft=0,e.style.top=0,e.style.left=0,e.style.marginTop=-(p||0)+"px",e.style.marginLeft=-(p||0)+"px",this.matrix=f,this._updateElement(),this.InitialMatrix=f.elements.slice(0)),f},i.prototype.setTransition=function(t){if("boolean"==typeof t){var e=this.transition,n=this.originalTransition,r=n?n.split(","):[];1==t&&e!=t&&(r.push("transform 0.5s"),this.element.style.transition=r.join(",")),0==t&&e!=t&&(r.push("transform 0s"),this.element.style.transition=r.join(",")),this.transition=t}},i.prototype._updateElement=function(){var t="matrix("+this.matrix.elements.join(",")+")";this.element.style.transform=t},i.prototype._pushhistory=function(){this.matrix.save()},i.prototype._setMatrix=function(t){this.matrix=t,this._updateElement(t)},i.prototype._getPageXY=function(t,n){var r,o,s,i;return n?2==n.length?(r=this._getMiddle(n),o=this._getRotation(n),s=new e(n[0].pageX,n[0].pageY),i=new e(n[1].pageX,n[1].pageY)):(r=new e(n[0].pageX,n[0].pageY),o=this.matrix.rotation()):(r=new e(t.pageX,t.pageY),o=this.matrix.rotation()),{point:r,angle:o,p1:s,p2:i}},i.prototype._getPoint2=function(t,n){var r=this._getPageXY(t,n),o=null,s=this.Ancestry,i=s.GetParents(),a=s.OffsetFromPoint(r.point,i),l=r.p1&&r.p2?this._distanceBetweenPoints(s.OffsetFromPoint(r.p1,i),s.OffsetFromPoint(r.p2,i)):0;return void 0!==t.deltaX&&(o=new e(t.deltaX,t.deltaY)),{offset:a,pageXY:r.point,pageX:r.point.x,pageY:r.point.y,angle:r.angle,distance:l,deltaXY:o}},i.prototype._distanceBetweenPoints=function(t,e){var n=t.pageX?{x:"pageX",y:"pageX"}:{x:"x",y:"y"};return Math.sqrt(Math.pow(Math.abs(e[n.x]-t[n.x]),2)+Math.pow(Math.abs(e[n.y]-t[n.y]),2))},i.prototype._getMiddle=function(t){var n=t[0],r=t[1],o=(r.pageX-n.pageX)/2+n.pageX,s=(r.pageY-n.pageY)/2+n.pageY;return new e(o,s)},i.prototype._getDistance2=function(t,n){var r=this.Ancestry;n=n||r.GetParents();var o=r.OffsetFromPoint(new e(t[0].pageX,t[0].pageY),n),s=r.OffsetFromPoint(new e(t[1].pageX,t[1].pageY),n);return this._distanceBetweenPoints(o,s)},i.prototype._getRotation=function(t,e){var n;return n=180*Math.atan2((t[0].pageY||t[0].y)-(t[1].pageY||t[1].y),(t[0].pageX||t[0].x)-(t[1].pageX||t[1].x))/Math.PI,e?this.matrix.normaldegree(n):n},i.prototype.snapRotation=function(){if(!this.options.disable||!this.options.disable.rotate){var t,n=this.matrix.rotation(),r=n-15*Math.round(n/15),o=Math.abs(r),s=this.sizes.element.initial;if(this.setTransition(!0),o<=3&&o>0){var i=this.lastrotationpoint||new e(s.width/2,s.height/2);this.rotate(i,-r),this.lastlastrotationpoint=void 0,this._pushhistory()}switch(n=this.matrix.rotation(),Math.abs(Math.round(10*n)/10)){case 0:case 180:t="Horizontal";break;case 90:t="Vertical";break;default:t="Rotation: "+Math.round(10*n)/10+"&deg;"}this.showMessage(t,"sticky",2e3)}},i.prototype.showMessage=function(t,e,n){console.log(t)},i.prototype._findCentreInWindow=function(){var t=this._getRect(this.parent);return new e(t.left+t.width/2,t.top+t.height/2)},i.prototype.centreinparent=function(t,n){var r=this.transition,o=this.Ancestry;this.setTransition(t),n=n||o.GetParents();var s=getComputedStyle(this.parent),i=new e(parseFloat(s.width)/2,parseFloat(s.height)/2),a=this.matrix.inverse().transformpoint(i);this.translate(a.sub(new e(this.sizes.element.initial.width/2,this.sizes.element.initial.height/2))),this.setTransition(r)},i.prototype.pointInRectangle=function(t,e,n,r,o){var s=n.sub(e),i=t.sub(e),a=r.sub(n),l=t.sub(n),h=s.dot(i),p=s.dot(s),c=a.dot(l),f=a.dot(a);return{dot_abap:h,dot_abab:p,dot_bcbp:c,dot_bcbc:f,ok:0<=h&&Math.round(10*h)/10<=Math.round(10*p)/10&&0<=c&&Math.round(10*c)/10<=Math.round(10*f)/10}},i.prototype.trigger=function(t,e){"function"==typeof this.events[t]&&this.events[t].apply(this,[this.element,e])},i.prototype._getRotatorPoints=function(t,n){var r,o=this.anchor.TL,s=t.touches,i=this.Ancestry;n=n||i.GetParents(),i._setoffset(),r=s?new e(s[0].pageX,s[0].pageY):new e(t.pageX,t.pageY);var a=Math.round(100*this._getRotation([o.add(i.scroll),r],!1))/100;return{deltaXY:null,offset:i.OffsetFromPoint(r,n),pageXY:r,pageX:r.x,pageY:r.y,angle:a,distance:0}},i.prototype._addRotateEvents=function(t){var n=this,r=function(t){if(!n.startedrotate)return!1;n.draggingrotate=!0,t.preventDefault(),t.stopPropagation();var r=t.touches,o=!1;if(r&&2==r.length)return!1;var s=n._getRotatorPoints(t),a=(n.origrotate,n.startrotate),l=n.matrix,h={angle:Math.round(100*(s.angle-a.angle))/100};0!=h.angle&&(n.parent!=n.options.rotatetarget.element&&(l.rotateAboutPoint(new e(0),h.angle),o=!0),n.options.rotatetarget instanceof i&&n.options.rotatetarget.rotate(n.anchor.TL.add(n.Ancestry.scroll),h.angle,!1,!0)),o&&n._updateElement(l),n.startrotate.angle=s.angle},o=function(t){t.preventDefault(),t.stopPropagation(),n.element.classList.remove("transformable-active"),n.startedrotate=!1,n.draggingrotate=!1,n.off(document.querySelector("body"),"mouseup.transformable dragend.transformable",o),n.options.rotatetarget instanceof i&&(n.options.rotatetarget.events.stop&&n.options.rotatetarget.trigger("stop",t),n.options.rotatetarget.snapRotation()),n.events.stop&&n.trigger("stop",t),n.snapRotation()};this.on(t,"mousedown.transformable touchstart.transformable",function(t){if(!0===n.options.disabled)return!1;if(n.startedresize)return!1;0==document.querySelectorAll(".transformable-active").length&&n.element.classList.add("transformable-active");var s=n.matrix;n.origrotate={trans:new e(s.elements[4],s.elements[5]),angle:s.rotation(!0),scale:s.scaling()};var i=t.touches;if(i&&2==i.length&&i[0].target&&i[1].target&&i[0].target!==i[1].target)return console.log("Two active elements not supported"),!1;n.anchor=n.anchor||{},n.anchor.clientRect=n._getRect(n.element.querySelector(".transformable-anchor-point")),n.anchor.TL=new e(n.anchor.clientRect.left,n.anchor.clientRect.top),n.startrotate=n._getRotatorPoints(t),n.startrotate.scale=n.origrotate.scale,n.startedrotate=!0,n.draggingrotate=!1,n.setTransition(!1),t.stopPropagation();var a=document.querySelector("body");"mousedown"==t.type&&(n.on(a,"mousemove.transformable",r),n.on(a,"mouseup.transformable dragend.transformable",o))}),this.on(t,"touchmove.transformable",r),this.on(t,"touchend.transformable",o)},i.prototype._addResizeEvents=function(t,n){var r=this,o=this.element,s=(r.options,function(t){if(!r.element.classList.contains("transformable-active"))return!1;if(!r.startedresize)return!1;r.draggingresize=!0,t.preventDefault(),t.stopPropagation();var n=t.touches;if(n&&2==n.length)return!1;var s=r._getPoint2(t,n),i=(r.origresize,r.startresize),a=getComputedStyle(o),l={trans:s.offset.sub(i.offset),angle:Math.round(100*(s.angle-i.angle))/100,distance:0!=i.distance?Math.round(s.distance/((i.distance+s.distance)/2)*1e3)/1e3:0};if(l.trans.nonzero()){var h=parseFloat(a.height),p=parseFloat(a.width),c=r.w-p,f=r.h-h,m=p+l.trans.x+c,d=h+l.trans.y+f;o.style.width=m+"px",o.style.height=d+"px",r.sizes.element.initial.bottomright=new e(m,d),r.sizes.element.initial.topright.x=m,r.sizes.element.initial.bottomleft.y=d,r.sizes.element.initial.width=m,r.sizes.element.initial.height=d}return r.startresize.angle=s.angle,!1}),i=function(t){0==document.querySelectorAll(".transformable-active").length&&r.element.classList.add("transformable-active"),console.log("_resize.start"),t.preventDefault(),t.stopPropagation();var n=r.matrix;r.origresize={trans:new e(n.elements[4],n.elements[5]),angle:n.rotation(),scale:n.scaling()};var i=t.touches;r.startresize=r._getPoint2(t,i),r.startresize.scale=r.origresize.scale,r.startedresize=!0,r.draggingresize=!1;var l=getComputedStyle(o);if(r.h=parseFloat(l.height),r.w=parseFloat(l.width),void 0===r.contained&&(r.contained=!0),r.events.startresize&&r.trigger("startresize",t),r.setTransition(!1),"mousedown"==t.type){var h=document.querySelector("body");r.on(h,"mousemove.transformable",s),r.on(h,"mouseup.transformable dragend.transformable",a)}return!1},a=function(){var t=document.querySelector("body");if(r.off(t,"mousemove.transformable",s),r.off(t,"mouseup.transformable dragend.transformable",a),!0===r.options.disabled)return!1;r.element.classList.remove("transformable-active"),r.startedresize=!1,r.draggingresize=!1};r.on(n,"mousedown.transformable",i),r.on(n,"touchstart.transformable",i),r.on(n,"touchmove.transformable",s),r.on(n,"touchend.transformable",a)},i.prototype.getRotationQuadrant=function(t){var e=(void 0!==t?t:this.matrix.rotation())%360;return e<0&&(e+=360),{Angle:e,Quad:Math.floor(e/90),Horiz:0==e||180==e,Vert:90==e||270==e}},i.prototype._addEvents=function(){var t=this,n=this.element,r=this.options&&this.options.contain;"function"==typeof this.events.transition&&n.addEventListener("transitionend",this.events.transition);var o=function(n){if(!0===t.options.disabled)return!1;if(!t.element.classList.contains("transformable-active"))return!1;if(!t.started||t.startedresize||t.startedrotate)return!1;t.dragging=!0,n.preventDefault(),n.stopPropagation();var o=n.touches,s=!1;if(o&&2==o.length&&o[0].target&&o[1].target&&o[0].target!==o[1].target)return console.log("Two active elements not supported"),!1;var i=t.matrix,a=(i.rotation(),t.options.disable),l=!1,h=!1,p=!1;a&&(l=a.zoom||a.scale,p=a.rotate,h=a.translate);var c=t._getPoint2(n,o),f=(t.orig,t.start),m={trans:c.offset.sub(f.offset),angle:Math.round(100*(c.angle-f.angle))/100,distance:0!=f.distance?Math.round(c.distance/((f.distance+c.distance)/2)*1e3)/1e3:0};if(r&&0==m.angle&&(!o||o&&1==o.length)){var d,u,g,y,v=t.Ancestry.FirstParent().rect,b=i.inverse(),x=v.topleft,w=v.topright,_=v.bottomright,L=v.bottomleft;d=b.transformpoint(x).sub(m.trans),u=b.transformpoint(w).sub(m.trans),g=b.transformpoint(_).sub(m.trans),y=b.transformpoint(L).sub(m.trans),f.size?f.size=0!=m.distance?new e(t._distanceBetweenPoints(d,u),t._distanceBetweenPoints(d,y)):f.size:f.size=new e(t._distanceBetweenPoints(d,u),t._distanceBetweenPoints(d,y));var M=t.sizes.element.initial;t.options;if("enclose"==r){var z=0;if((E={tl:t.pointInRectangle(M.topleft,d,u,g,y),tr:t.pointInRectangle(M.topright,d,u,g,y),br:t.pointInRectangle(M.bottomright,d,u,g,y),bl:t.pointInRectangle(M.bottomleft,d,u,g,y)}).tl.ok&&z++,E.tr.ok&&z++,E.br.ok&&z++,E.bl.ok&&z++,!(4==z))switch((R=t.getRotationQuadrant(f.angle)).Quad){case 0:if(0==R.Angle){if(!E.br.ok){var F=M.bottomright.perpOnLine(u,g).sub(M.bottomright),P=M.bottomright.perpOnLine(y,g).sub(M.bottomright);F.x<0&&(m.trans=m.trans.add(F)),P.y<0&&(m.trans=m.trans.add(P))}if(!E.tl.ok){var k=M.topleft.perpOnLine(d,y),T=M.topleft.perpOnLine(d,u);k.x>0&&(m.trans=m.trans.add(k)),T.y>0&&(m.trans=m.trans.add(T))}}else{if(!E.bl.ok){var O=M.bottomleft.perpOnLine(d,y).sub(M.bottomleft);O.x>0&&(m.trans=m.trans.add(O))}if(!E.br.ok)(P=M.bottomright.perpOnLine(y,g).sub(M.bottomright)).y<0&&(m.trans=m.trans.add(P));if(!E.tr.ok){var S=M.topright.perpOnLine(u,g).sub(M.topright);S.x<0&&(m.trans=m.trans.add(S))}if(!E.tl.ok)(T=M.topleft.perpOnLine(d,u)).y>0&&(m.trans=m.trans.add(T))}break;case 3:if(270==R.Angle){if(!E.tl.ok){T=M.topleft.perpOnLine(d,y);(k=M.topleft.perpOnLine(y,g)).x>0&&(m.trans=m.trans.add(k)),T.y>0&&(m.trans=m.trans.add(T))}if(!E.br.ok){F=M.bottomright.perpOnLine(d,u).sub(M.bottomright),P=M.bottomright.perpOnLine(g,u).sub(M.bottomright);F.x<0&&(m.trans=m.trans.add(F)),P.y<0&&(m.trans=m.trans.add(P))}}else{if(!E.tl.ok)(k=M.topleft.perpOnLine(d,y)).x>0&&(m.trans=m.trans.add(k));if(!E.br.ok)(F=M.bottomright.perpOnLine(u,g).sub(M.bottomright)).x<0&&(m.trans=m.trans.add(F));if(!E.tr.ok)(I=M.topright.perpOnLine(d,u).sub(M.topright)).y>0&&(m.trans=m.trans.add(I));if(!E.bl.ok)(A=M.bottomleft.perpOnLine(y,g).sub(M.bottomleft)).y<0&&(m.trans=m.trans.add(A))}break;case 1:if(90==R.Angle){if(!E.tl.ok){k=M.topleft.perpOnLine(u,d),T=M.topleft.perpOnLine(u,g);k.x>0&&(m.trans=m.trans.add(k)),T.y>0&&(m.trans=m.trans.add(T))}if(!E.br.ok){F=M.bottomright.perpOnLine(g,y).sub(M.bottomright),P=M.bottomright.perpOnLine(d,y).sub(M.bottomright);F.x<0&&(m.trans=m.trans.add(F)),P.y<0&&(m.trans=m.trans.add(P))}}else{if(!E.tl.ok)(k=M.topleft.perpOnLine(u,g)).x>0&&(m.trans=m.trans.add(k));if(!E.br.ok)(F=M.bottomright.perpOnLine(d,y).sub(M.bottomright)).x<0&&(m.trans=m.trans.add(F));if(!E.tr.ok)(I=M.topright.perpOnLine(y,g).sub(M.topright)).y>0&&(m.trans=m.trans.add(I));if(!E.bl.ok)(A=M.bottomleft.perpOnLine(u,d).sub(M.bottomleft)).y<0&&(m.trans=m.trans.add(A))}break;case 2:if(180==R.Angle){if(!E.tl.ok){k=M.topleft.perpOnLine(g,y),T=M.topleft.perpOnLine(d,y);k.y>0&&(m.trans=m.trans.add(k)),T.y>0&&(m.trans=m.trans.add(T))}if(!E.br.ok){F=M.bottomright.perpOnLine(u,d).sub(M.bottomright),P=M.bottomright.perpOnLine(u,g).sub(M.bottomright);F.y<0&&(m.trans=m.trans.add(F)),P.y<0&&(m.trans=m.trans.add(P))}}var I,A;if(!E.tl.ok)(k=M.topleft.perpOnLine(g,y)).y>0&&(m.trans=m.trans.add(k));if(!E.br.ok)(F=M.bottomright.perpOnLine(u,d).sub(M.bottomright)).y<0&&(m.trans=m.trans.add(F));if(!E.tr.ok)(I=M.topright.perpOnLine(d,y).sub(M.topright)).x<0&&(m.trans=m.trans.add(I));if(!E.bl.ok)(A=M.bottomleft.perpOnLine(u,g).sub(M.bottomleft)).x>0&&(m.trans=m.trans.add(A))}}if("cover"==r){var E,R,C=0;if((E={tl:t.pointInRectangle(M.topleft,d,u,g,y),tr:t.pointInRectangle(M.topright,d,u,g,y),br:t.pointInRectangle(M.bottomright,d,u,g,y),bl:t.pointInRectangle(M.bottomleft,d,u,g,y)}).tl.ok||C++,E.tr.ok||C++,E.br.ok||C++,E.bl.ok||C++,!E.tl.ok&&!E.tr.ok&&!E.br.ok&&!E.bl.ok||t.lockcontain||3==C&&0==f.angle)switch(t.lockcontain=!0,(R=t.getRotationQuadrant(f.angle)).Quad){case 0:u.y<=0&&(m.trans.y=m.trans.y+u.y),y.y>=M.bottomleft.y&&(m.trans.y=m.trans.y+(y.y-M.bottomleft.y)),g.x>=M.bottomright.x&&(m.trans.x=m.trans.x+(g.x-M.bottomright.x)),d.x<=0&&(m.trans.x=m.trans.x+d.x);break;case 1:d.y>=M.bottomleft.y&&(m.trans.y=m.trans.y+(d.y-M.bottomleft.y)),y.x>=M.topright.x&&(m.trans.x=m.trans.x-(M.topright.x-y.x)),g.y<=0&&(m.trans.y=m.trans.y+g.y),u.x<=0&&(m.trans.x=m.trans.x+u.x);break;case 2:y.y<=0&&(m.trans.y=m.trans.y+y.y),d.x>=M.bottomright.x&&(m.trans.x=m.trans.x-(M.bottomright.x-d.x)),u.y>=M.bottomleft.y&&(m.trans.y=m.trans.y+(u.y-M.bottomleft.y)),g.x<=0&&(m.trans.x=m.trans.x+g.x);break;case 3:d.y<=0&&(m.trans.y=m.trans.y+d.y),y.x<=0&&(m.trans.x=m.trans.x+y.x),g.y>=M.bottomright.y&&(m.trans.y=m.trans.y+(g.y-M.bottomright.y)),u.x>=M.topright.x&&(m.trans.x=m.trans.x-(M.topright.x-u.x))}}}return m.trans.nonzero()&&!h&&(i.translate(m.trans),s=!0,t.delta.x+=m.trans.x,t.delta.y+=m.trans.y),0!=m.distance&&1!=m.distance&&o&&(2!=o.length||l||(i.scale(c.offset,m.distance),s=!0)),0==m.angle||p||(i.rotateAboutPoint(c.offset,m.angle),s=!0),s&&t._updateElement(i),t.start.angle=c.angle,t.events.move&&t.trigger("move",n),!1},s=function(n){if(!0===t.options.disabled)return!1;if(t.startedresize||t.startedrotate)return!1;if(0==document.querySelectorAll(".transformable-active").length&&t.element.classList.add("transformable-active"),"rotator-box"==t.options.type){var r=n.target.closest("svg");if(r&&!r.classList.contains("transformable-svg-anchor"))return!1;n.stopPropagation()}var s=n.touches;t.start=t._getPoint2(n,s);var a=t.sizes.window;if(t.start.pageX<40||t.start.pageX>a.width-40)return console.log("edge cancel."),!1;if(t.delta={x:0,y:0},s&&2==s.length&&s[0].target&&s[1].target&&s[0].target!==s[1].target)return console.log("Two active elements not supported"),!1;var l=t.matrix;if(t.orig={trans:new e(l.elements[4],l.elements[5]),angle:l.rotation(),scale:l.scaling()},t.start.scale=t.orig.scale,t.started=!0,t.dragging=!1,t.events.start&&t.trigger("start",n),t.setTransition(!1),"mousedown"==n.type){var h=document.querySelector("body");t.on(h,"mousemove.transformable",o),t.on(h,"mouseup.transformable dragend.transformable",i)}},i=function(n){var r=document.querySelector("body");if(t.off(r,"mousemove.transformable",o),t.off(r,"mouseup.transformable dragend.transformable",i),t.element.classList.remove("transformable-active"),t.element.classList.remove("transformable-reset"),!0===t.options.disabled)return!1;t.lockcontain=!1,!0===t.started&&!0===t.dragging&&(t._pushhistory(),t.snapRotation()),!0===t.started&&!1===t.dragging&&t.events.tap&&t.trigger("tap",n),t.dragging=!1,t.started=!1,t.events.stop&&t.trigger("stop",n),t.setTransition(!0);var s=t.rotatorBox,a=t.resizertl,l=t.resizerbr;if(s){var h=t.matrix.scaling();s.scale(new e(0),1/s.matrix.scaling()*(1/h))}if(a&&l){var p=h||t.matrix.scaling();a.style.transform="scale("+1/p+")",l.style.transform="scale("+1/p+")"}};t.on(n,"mousedown.transformable",s),t.on(n,"touchstart.transformable",s),t.on(n,"touchmove.transformable",o),t.on(n,"touchend.transformable",i),t.on(n,"scroll.transformable",function(t){return console.log("tried scroll"),t.preventDefault(),t.stopPropagation(),!1}),(!this.options.disable||this.options.disable&&!this.options.disable.wheel)&&-1==navigator.userAgent.indexOf("Mac OS")&&addWheelListener(n,function(e){if(!0===t.options.disabled)return!1;if(t.startedresize||t.startedrotate)return!1;if("rotator-box"==t.options.type)return!1;e.preventDefault(),e.stopPropagation();var n=Date.now();if((t.lastwheelmove?n-t.lastwheelmove:150)<150&&navigator.userAgent.indexOf("Mac")>-1)return!1;0==document.querySelectorAll(".transformable-active").length&&t.element.classList.add("transformable-active"),t.rotatorBox&&t.rotatorBox.parent.classList.add("transformable-wheel-active"),t._wheelTimer&&clearTimeout(t._wheelTimer);var r,o=t._getPoint2(e),s=t.matrix,i=(s.scaling(),o.deltaXY.y<0?1:-1);t.setTransition(!0),0!=o.deltaXY.y&&(r=1+.05*i,s.scale(o.offset,r),t._updateElement()),t.element.classList.remove("transformable-active"),t._wheelTimer=setTimeout(function(){t._pushhistory(),t.rotatorBox&&t.rotatorBox.parent.classList.remove("transformable-wheel-active")},750),t.lastwheelmove=n})},i.Handlers={Namespaces:{}},i.prototype.on=function(t,e,n,r){var o,s,a,l,h,p=e.split(" ");for(o=0;o<p.length;o++)a=(s=p[o].split("."))[0],l=s.length>1&&s[1],t.addEventListener(a,n,r||!1),i.Handlers.Namespaces[e]||(i.Handlers.Namespaces[e]=[]),l&&(i.Handlers.Namespaces[l]||(i.Handlers.Namespaces[l]=[])),h=i.Handlers.Namespaces[e].push({event:a,func:n,opts:r||!1}),l&&i.Handlers.Namespaces[l].push(i.Handlers.Namespaces[e][h-1])},i.prototype.off=function(t,e,n){var r,o=i.Handlers.Namespaces[e];if(o)for(var s=0;s<o.length;s++)r=o[s],t.removeEventListener(r.event,r.func,r.opts)},i.prototype.Refresh=function(){this.sizes=void 0,this.setInitialSizes(),this.Ancestry.Refresh()},function(){var t;window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(e,150)});var e=function(){document.querySelectorAll(".transformable").forEach(function(t,e){var n=!!(e=t.getAttribute("data-transformable-id"))&&i.Instance[e];n instanceof i&&n.Refresh()})}}(),"undefined"!=typeof window&&(window.Transformable=i);const a=i;export{a as default};