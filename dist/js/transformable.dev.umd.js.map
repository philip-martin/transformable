{"version":3,"file":"transformable.dev.umd.js","mappings":"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","sources":["webpack://Transformable/webpack/universalModuleDefinition","webpack://Transformable/webpack/bootstrap","webpack://Transformable/webpack/runtime/define property getters","webpack://Transformable/webpack/runtime/hasOwnProperty shorthand","webpack://Transformable/./src/js/Point.js","webpack://Transformable/./src/js/Matrix.js","webpack://Transformable/./src/js/Ancestry.js","webpack://Transformable/./src/js/transformable.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Transformable\"] = factory();\n\telse\n\t\troot[\"Transformable\"] = factory();\n})(this, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","class Point {\r\n  constructor(x, y = x) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  scale(factor) {\r\n    return new Point(this.x * factor, this.y * factor);\r\n  }\r\n\r\n  round(precision = 0) {\r\n    const factor = precision ? Math.pow(10, precision) : 1;\r\n    return new Point(\r\n      Math.round(this.x * factor) / factor,\r\n      Math.round(this.y * factor) / factor\r\n    );\r\n  }\r\n\r\n  sub(p) {\r\n    return new Point(this.x - p.x, this.y - p.y);\r\n  }\r\n\r\n  add(p) {\r\n    return new Point(this.x + p.x, this.y + p.y);\r\n  }\r\n\r\n  mult(p) {\r\n    return new Point(this.x * p.x, this.y * p.y);\r\n  }\r\n\r\n  divide(p) {\r\n    return new Point(this.x / p.x, this.y / p.y);\r\n  }\r\n\r\n  nonzero() {\r\n    return this.x !== 0 || this.y !== 0;\r\n  }\r\n\r\n  equals(p) {\r\n    return this.x === p.x && this.y === p.y;\r\n  }\r\n\r\n  moreoreq(p) {\r\n    return { x: this.x >= p.x, y: this.y >= p.y };\r\n  }\r\n\r\n  lessoreq(p) {\r\n    return { x: this.x <= p.x, y: this.y <= p.y };\r\n  }\r\n\r\n  dot(p) {\r\n    return this.x * p.x + this.y * p.y;\r\n  }\r\n\r\n  perpOnLine(p1, p2) {\r\n    const k = ((p2.y - p1.y) * (this.x - p1.x) - (p2.x - p1.x) * (this.y - p1.y)) /\r\n      (Math.pow(p2.y - p1.y, 2) + Math.pow(p2.x - p1.x, 2));\r\n    const x4 = this.x - k * (p2.y - p1.y);\r\n    const y4 = this.y + k * (p2.x - p1.x);\r\n    return new Point(x4, y4);\r\n  }\r\n\r\n  mag() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n\r\n  // toPos() {\r\n  //   return new Pos(this.x, this.y);\r\n  // }\r\n}\r\n\r\nexport default Point;\r\n","import Point from './Point.js';\r\n\r\nvar Matrix = function (a) {\r\n    if (a == null || typeof a == 'undefined')\r\n        return Matrix.Identity();\r\n\r\n    if (a instanceof Array) {\r\n        this.elements = a.slice(0);\r\n    } else {\r\n        if(a instanceof Matrix) {\r\n            this.elements = a.elements.slice(0);\r\n        } else {\r\n            if (arguments.length == 6) {\r\n                this.elements = [];\r\n                var i = 0;\r\n                while (i < arguments.length)\r\n                    this.elements.push(arguments[i++]);\r\n            } else\r\n                throw new Error(\"Can't create Matrix from supplied arguments. Array of 6 elements, Matrix or nothing only.\");\r\n        }\r\n    }\r\n    this.history = { undo: [], redo: [] };\r\n\r\n    return this;\r\n}\r\nMatrix.Identity = function () {\r\n    return new Matrix([1, 0, 0, 1, 0, 0]);\r\n}\r\nMatrix.prototype = {\r\n    transformpoint: function (pt) {\r\n        var m = this.elements;\r\n\t\treturn new Point(\r\n\t\t\tpt.x * m[0] + pt.y * m[2] + m[4],\r\n\t\t\tpt.x * m[1] + pt.y * m[3] + m[5]\r\n\t\t)\r\n    },\r\n    multiply: function(els) {\r\n        var me = this.elements;\r\n        var a1 = me[0],\r\n\t\t\tb1 = me[1],\r\n\t\t\tc1 = me[2],\r\n\t\t\td1 = me[3],\r\n\t\t\te1 = me[4],\r\n\t\t\tf1 = me[5],\r\n            a2 = els[0],\r\n            b2 = els[1],\r\n            c2 = els[2],\r\n            d2 = els[3],\r\n            e2 = els[4],\r\n            f2 = els[5];\r\n\r\n\r\n\t\t/* matrix order (canvas compatible):\r\n\t\t* ace\r\n\t\t* bdf\r\n\t\t* 001\r\n\t\t*/\r\n\t\tthis.elements = [\r\n            a1 * a2 + c1 * b2,\r\n            b1 * a2 + d1 * b2,\r\n            a1 * c2 + c1 * d2,\r\n            b1 * c2 + d1 * d2,\r\n            a1 * e2 + c1 * f2 + e1,\r\n            b1 * e2 + d1 * f2 + f1\r\n\t\t];\r\n\r\n\t\treturn this;\r\n    },\r\n    elementsequal: function (a, b) {\r\n        if (!a || !b) return false;\r\n        return (\r\n        a[0] == b[0] &&\r\n        a[1] == b[1] &&\r\n        a[2] == b[2] &&\r\n        a[3] == b[3] &&\r\n        a[4] == b[4] &&\r\n        a[5] == b[5]);\r\n    },\r\n    save: function (els) {\r\n        var h = this.history, last,\r\n            k = typeof els === 'string' ? els : false;\r\n\r\n        if (!els || k)\r\n            els = this.elements;\r\n\r\n        last = h.undo[h.undo.length - 1];\r\n\r\n        if (!this.elementsequal(els, last)) {\r\n            var l = h.undo.push(els.slice(0));\r\n            h.redo = [];\r\n            if (k)\r\n                h.undo[k] = h.undo[l - 1];\r\n        } else \r\n            if (k) {\r\n                h.undo[k] = last;\r\n            }\r\n    },\r\n    undo: function (k) {\r\n        var h = this.history.undo,\r\n            len = h.length,\r\n            cur = h.pop(),\r\n            prev = typeof k == 'string' ? h[k] : h[h.length - 1];\r\n        \r\n        if (cur)\r\n            this.history.redo.unshift(cur);\r\n\r\n        this.elements = prev ? prev.slice(0) : this.identity();\r\n    },\r\n    redo: function () {\r\n        var h = this.history.redo, \r\n            len = h.length, \r\n            cur = h.pop(),\r\n            prev = h[h.length - 1]\r\n        \r\n        if (cur)\r\n            this.history.undo.unshift(cur);\r\n\r\n        this.elements = prev ? prev.slice(0) : this.identity();\r\n    },\r\n    reset: function () {\r\n        this.elements = this.identity();\r\n        return this;\r\n    },\r\n    determinant: function () {\r\n        var m = this.elements;\r\n        return m[0] * m[3] - m[1] * m[2];\r\n    },\r\n\tinverse: function() {\r\n\r\n\t\tvar me = this.elements,\r\n\t\t\tm  = this.identity(),\r\n\t\t\tdt = this.determinant();\r\n\r\n\t\tif (dt < 1e-14)\r\n\t\t\tthrow \"Matrix not invertible.\";\r\n\r\n\t\tm[0] = me[3] / dt;\r\n\t\tm[1] = -me[1] / dt;\r\n\t\tm[2] = -me[2] / dt;\r\n\t\tm[3] = me[0] / dt;\r\n\t\tm[4] = (me[2] * me[5] - me[3] * me[4]) / dt;\r\n\t\tm[5] = -(me[0] * me[5] - me[1] * me[4]) / dt;\r\n\r\n\t\treturn new Matrix(m);\r\n\t},\r\n\tinvert: function () {\r\n        return this.multiply(this.inverse().elements);\r\n\t},\r\n    identity: function () {\r\n        return [1, 0, 0, 1, 0, 0];\r\n    },\r\n    isIdentity: function () {\r\n        var m = this.elements;\r\n        return m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1 && m[4] === 0 && m[5] === 0;\r\n    },\r\n    translate: function (x, y) {\r\n        if (x instanceof Point && !y)\r\n            return this.multiply([1, 0, 0, 1, x.x, x.y]);\r\n\r\n        return this.multiply([1, 0, 0, 1, x, y]);\r\n    },\r\n    scale: function (pt, s) {\r\n        this.multiply([s, 0, 0, s, 0, 0]);\r\n        var dp = pt.sub(pt.scale(s)).scale(1/s); // keep pt in same place after scale from origin\r\n        return this.translate(dp);\r\n    },\r\n    rotateAboutPoint: function (pt, a) {\r\n        var r = a * Math.PI / 180;\r\n        return this.multiply([\r\n            Math.cos(r),\r\n            Math.sin(r),\r\n            -Math.sin(r),\r\n            Math.cos(r),\r\n            pt.x - Math.cos(r) * pt.x - -Math.sin(r) * pt.y,\r\n            pt.y - Math.sin(r) * pt.x - Math.cos(r) * pt.y\r\n        ]);\r\n    },\r\n    rotate: function (a,b) {\r\n        if (a instanceof Point)\r\n            return this.rotateAboutPoint(a, b);\r\n\r\n        var r = a * Math.PI / 180;\r\n        return this.multiply([Math.cos(r), Math.sin(r), -Math.sin(r), Math.cos(r), 0, 0]);\r\n    },\r\n    normaldegree: function (r) {\r\n        return r < 0 ? r + 360 : r;\r\n    },\r\n    rotation: function (norm) {\r\n        var l = this.elements, r = Math.atan2(l[1], l[0]) * 180 / Math.PI;\r\n\r\n        return norm ? this.normaldegree(r) : r;\r\n    },\r\n    scaling: function () {\r\n        return Math.sqrt(Math.pow(this.elements[0], 2) + Math.pow(this.elements[1], 2))\r\n    },\r\n    translation: function () {\r\n        return new Point(this.elements[4], this.elements[5]);\r\n    }\r\n}\r\n\r\nexport default Matrix;\r\n","import Matrix from './Matrix.js';\r\nimport Point from './Point.js';\r\n\r\nclass Ancestry {\r\n    constructor(self) {\r\n        this.Items = [];\r\n        this._add(self, self.element);\r\n        this.Self = self;\r\n        this._init();\r\n    }\r\n\r\n    _getScroll() {\r\n        return new Point(window.pageXOffset || document.documentElement.scrollLeft, window.pageYOffset || document.documentElement.scrollTop);\r\n    }\r\n\r\n    /**\r\n     * Gets size/positions from computed style\r\n     * @param {HtmlElement} el\r\n     * @param {CSSStyleDeclaration} cs If you just got the computed styles, pass them in.\r\n     */\r\n    GetElementSize(el, cs) {\r\n        cs = cs || getComputedStyle(el);\r\n\r\n        const left = parseFloat(cs.left);\r\n        const top = parseFloat(cs.top);\r\n        const w = parseFloat(cs.width);\r\n        const h = parseFloat(cs.height);\r\n\r\n        return {\r\n            offset: new Point(left || 0, top || 0),\r\n            width: w,\r\n            height: h,\r\n            topleft: new Point(0, 0),\r\n            topright: new Point(w, 0),\r\n            bottomright: new Point(w, h),\r\n            bottomleft: new Point(0, h)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Prints out the Ancestry to console\r\n     */\r\n    _debug() {\r\n        this.Items.forEach(function (v, i) {\r\n            console.log(v.matrix.elements);\r\n        });\r\n        this.Items.forEach(function (v, i) {\r\n            console.log([v.element]);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Automatically called after resizing the window.\r\n     * Or can be called manually if the resizable element has its position on \r\n     * the page changed by elements outside its Ancestry. E.g. content above, changes height\r\n     */\r\n    Refresh() {\r\n        this.Items = [];\r\n        this._add(this.Self, this.Self.element);\r\n        //this.scroll = Point.Point0;\r\n        this._init();\r\n    }\r\n\r\n    /**\r\n     * Checks a computed style value to see if it is in percent instead of px \r\n     * @param {String|Number} v\r\n     */\r\n    _ispercent(v) { return v.indexOf('%') > -1; }\r\n\r\n    /**\r\n     * Checks a computed style value to see if it is auto\r\n     * @param {String|Number} v\r\n     */\r\n    _isauto(v) { return v == 'auto'; }\r\n\r\n    /**\r\n     * Converts percentage values obtained from buggy browsers to pixels\r\n     * @param {String} k CSS style to calculate\r\n     * @param {String|Number} val The percentage value to convert to pixels\r\n     * @param {CSSStyleDeclaration} cs The computed styles of the parent element. E.g. getComputedStyle(parentElement);\r\n     */\r\n    _pixelFromParent(k, val, cs) {\r\n        if (val === '0%') return 0;\r\n        let v = parseFloat(val);\r\n        switch (k) {\r\n            case 'left':\r\n                v = parseFloat(cs.width) * v / 100;\r\n                break;\r\n            case 'top':\r\n                v = parseFloat(cs.height) * v / 100;\r\n                break;\r\n        }\r\n        return v;\r\n    }\r\n\r\n    /**\r\n     * Gets dimensions from computed styles and makes them all pixel based\r\n     * @param {HtmlElement} el\r\n     */\r\n    GetComputedDims(el) {\r\n        const cs = getComputedStyle(el);\r\n        const cmt = cs.marginTop;\r\n        const cml = cs.marginLeft;\r\n        let cl = cs.left;\r\n        let ct = cs.top;\r\n        const leftp = this._ispercent(cl);\r\n        const topp = this._ispercent(ct);\r\n        const pf = function (v) { return parseFloat(v); }\r\n        let l, t, pcs;\r\n\r\n        if (this._isauto(cl)) cl = 0;\r\n        if (this._isauto(ct)) ct = 0;\r\n\r\n        if (leftp || topp)\r\n            pcs = getComputedStyle(el.parentNode);\r\n\r\n        if (leftp) l = this._pixelFromParent('left', cl, pcs);\r\n        if (topp) t = this._pixelFromParent('top', ct, pcs);;\r\n\r\n        return {\r\n            left: typeof l != 'undefined' ? l : pf(cl),\r\n            top: typeof t != 'undefined' ? t : pf(ct),\r\n            marginLeft: pf(cml),\r\n            marginTop: pf(cmt),\r\n            transform: cs.transform\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Walks upwards through node hierarchy replacing any position/offset changing CSS with an equivalent matrix.\r\n     * This simplifies matrix calculations and means no CSS restrictions are required on elements you want to make transformable.\r\n     */\r\n    _init() {\r\n        let t, has, pt, tid, nm, el = this.Self.element;\r\n        while (el.parentNode && !el.parentNode.body) {\r\n\r\n            const cs = this.GetComputedDims(el.parentNode);\r\n            t = cs.transform;\r\n            has = /matrix\\(\\-?[0-9]+[^\\)]+\\)/.test(t);\r\n            \r\n            const top = cs.top;\r\n            let left = cs.left,\r\n            margintop = cs.marginTop,\r\n            marginleft = cs.marginLeft;\r\n\r\n            if (has || el.parentNode.classList.contains('transformable') || el.classList.contains('transformable')\r\n                || top != 0 || left != 0\r\n                || margintop != 0\r\n                || marginleft != 0\r\n                ) {\r\n                if (tid = el.parentNode.getAttribute('data-transformable-id')) {\r\n                    pt = Transformable.Instance[tid];\r\n                    if (pt)\r\n                        this._add(pt);\r\n                } else {\r\n                    let om = has ? new Matrix(this.Self._cssStringToArray(t)) : false;                \r\n\r\n                    if (has || top != 0 || left != 0 || margintop != 0 || marginleft != 0 || el.classList.contains('transformable')) {\r\n                        nm = new Matrix();\r\n                        nm.translate(left||0, top||0).translate(marginleft||0, margintop||0);\r\n\r\n                        if (om)\r\n                            nm.multiply(om.elements);\r\n\r\n                        let prect = this.GetElementSize(el.parentNode);\r\n\r\n                        el.parentNode.style.top = 0;\r\n                        el.parentNode.style.left = 0; \r\n                        el.parentNode.style.marginLeft = 0;\r\n                        el.parentNode.style.marginTop = 0;\r\n                        el.parentNode.style.transformOrigin = '0 0';\r\n                        el.parentNode.style.transform = this.Self._arrayToCssString(nm.elements);\r\n\r\n                        this._add(nm, el.parentNode, prect);\r\n                    }\r\n                }\r\n            }\r\n            el = el.parentNode;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets offset initially then updates scroll position data\r\n     */\r\n    _setoffset () {\r\n        this.scroll = this._getScroll();\r\n        if(this.offset) return;\r\n        let cur, i;\r\n        const trans = new Matrix();\r\n        for (i = 0; i < this.Items.length; i++)\r\n            trans.translate(this.Items[i].matrix.translation());\r\n\r\n        for (i = 0; i < this.Items.length; i++) {\r\n            cur = this.Items[i];\r\n            if (cur.element.classList.contains('transformable')) {\r\n                this.offset = cur.transformable.offset.sub(trans.translation());\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds an element/transformable element to the Ancestry of parent elements\r\n     * @param {Transformable|Matrix} t\r\n     * @param {HtmlElement} el\r\n     */\r\n    _add(t, el) {\r\n        if (t instanceof Transformable) {\r\n            this.Items.unshift({ matrix: t.matrix, element: el || t.element, rect: t.sizes.element.initial, transformable: t });\r\n        }\r\n        if (t instanceof Matrix) {\r\n            this.Items.unshift({ matrix: t, element: el, rect: this.GetElementSize(el) });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns Array of objects for each parent element.\r\n     * Gets the matrix, inverse matrix and the element for each parent.\r\n     */\r\n    GetParents() {\r\n        let r = [];\r\n        //this._setoffset();\r\n        this.Items.forEach(function (v, i) {\r\n            let t = v.transformable, m, ti;\r\n            if (!t)\r\n                if (ti = v.element.getAttribute('data-transformable-id')) {\r\n                    t = Transformable.Instance[ti];\r\n                    v.transformable = t;\r\n                }\r\n\r\n            m = t ? t.matrix : v.matrix\r\n            r.push({\r\n                Matrix: m,\r\n                Inverse: m.inverse(),\r\n                Element: v.element\r\n            });\r\n        });\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Uses this instance's matrix to transform corner points\r\n     * @param {Object} c Named points of a rectangle\r\n     */\r\n    TransformCorners(c) {\r\n        const mat = this.GetMatrix();\r\n        return {\r\n            bottomright: mat.transformpoint(c.bottomright),\r\n            bottomleft: mat.transformpoint(c.bottomleft),\r\n            topright: mat.transformpoint(c.topright),\r\n            topleft: mat.transformpoint(c.topleft)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets data from Items for the outermost containing element.\r\n     */\r\n    FirstParent() {\r\n        const t = this, i = t.Items, l = i.length;\r\n        const par = l > 1 ? i[l - 2] : false;\r\n\r\n        return par;\r\n    }\r\n\r\n    /**\r\n     Gets the combined effective matrix based on all matrices that have an effect on the element\r\n     */\r\n    GetMatrix() {\r\n        let mat = Matrix.Identity();\r\n        this.Items.forEach(function (v, i) {\r\n            mat.multiply(v.matrix.elements);\r\n        });\r\n        return mat;\r\n    }\r\n\r\n    /**\r\n     * Gets the x,y coordinate on the transformable element for a given point\r\n     * @param {Point} p Coordinates in the window or from a mouse/touch event\r\n     * @param {Array of Object} pars Objects with matrix, inverse matrix and element\r\n     */\r\n    OffsetFromPoint(p, pars) {\r\n        pars = pars || this.GetParents();\r\n        this._setoffset();\r\n        let op = p, cur, mat = Matrix.Identity().translate(this.offset);\r\n\r\n        for (var i = 0; i < pars.length; i++) {\r\n            cur = pars[i];\r\n            mat.multiply(cur.Matrix.elements);\r\n        }\r\n\r\n        const matinv = mat.inverse();\r\n        op = matinv.transformpoint(op); \r\n\r\n        return op;\r\n    }\r\n\r\n}\r\n\r\nexport default Ancestry;\r\n","import '../css/transformable.css';\r\nimport Matrix from './Matrix.js';\r\nimport Ancestry from './Ancestry.js';\r\nimport Point from './Point.js';\r\n\r\n// Wheel event polyfill (modernized slightly for scope, but logic preserved for compatibility)\r\n((window, document) => {\r\n    let prefix = \"\";\r\n    let _addEventListener;\r\n\r\n    // Detect event model\r\n    if (window.addEventListener) {\r\n        _addEventListener = \"addEventListener\";\r\n    } else {\r\n        _addEventListener = \"attachEvent\";\r\n        prefix = \"on\";\r\n    }\r\n\r\n    // Detect available wheel event\r\n    const support = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers\r\n                    document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE\r\n                    \"DOMMouseScroll\"; // Older Firefox\r\n\r\n    window.addWheelListener = (elem, callback, useCapture) => {\r\n        const _addWheelListener = (targetElem, eventName, cb, capture) => {\r\n            targetElem[_addEventListener](prefix + eventName, support === \"wheel\" ? cb : (originalEvent) => {\r\n                const event = originalEvent || window.event;\r\n\r\n                // Create a normalized event object\r\n                const normalizedEvent = {\r\n                    originalEvent: event,\r\n                    target: event.target || event.srcElement,\r\n                    type: \"wheel\",\r\n                    deltaMode: event.type === \"MozMousePixelScroll\" ? 0 : 1,\r\n                    deltaX: 0,\r\n                    deltaY: 0,\r\n                    deltaZ: 0,\r\n                    preventDefault() {\r\n                        event.preventDefault ?\r\n                            event.preventDefault() :\r\n                            event.returnValue = false;\r\n                    },\r\n                    stopPropagation() {\r\n                        event.stopPropagation ?\r\n                            event.stopPropagation() :\r\n                            event.returnValue = false;\r\n                    },\r\n                };\r\n\r\n                // Calculate deltaY (and deltaX)\r\n                if (support === \"mousewheel\") {\r\n                    normalizedEvent.deltaY = -1 / 40 * event.wheelDelta;\r\n                    if (event.wheelDeltaX) {\r\n                        normalizedEvent.deltaX = -1 / 40 * event.wheelDeltaX;\r\n                    }\r\n                } else {\r\n                    normalizedEvent.deltaY = event.detail;\r\n                }\r\n\r\n                return cb(normalizedEvent);\r\n            }, capture || false);\r\n        };\r\n\r\n        _addWheelListener(elem, support, callback, useCapture);\r\n\r\n        // Handle MozMousePixelScroll in older Firefox\r\n        if (support === \"DOMMouseScroll\") {\r\n            _addWheelListener(elem, \"MozMousePixelScroll\", callback, useCapture);\r\n        }\r\n    };\r\n})(window, document);\r\n\r\nclass Transformable {\r\n    /**\r\n     * A store/lookup of all transformable instances.\r\n     * Each transformable element is given a data attribute for its id in this lookup.\r\n     */\r\n    static Instance = [];\r\n    /**\r\n     * Datastore for any namespaced events attached to elements by .on(....)\r\n     */\r\n    static Handlers = { Namespaces: {} };\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {HTMLElement} el\r\n     * @param {Object} opts\r\n     */\r\n    constructor(el, opts = {}) {\r\n        this.element = el.length ? el[0] : el;\r\n        this.options = opts;\r\n        \r\n        this.element.classList.add('transformable');\r\n        this.parent = this.element.parentNode;\r\n\r\n        this.setInitialSizes();\r\n\r\n        if (opts.matrix) {\r\n            const cscale = { x: 1, y: 1 };\r\n            if (opts.computedsize?.width || opts.computedsize?.Width) {\r\n                const precs = {\r\n                    width: opts.computedsize.width || opts.computedsize.Width,\r\n                    height: opts.computedsize.height || opts.computedsize.Height\r\n                };\r\n                const curcs = this.sizes.element.initial;\r\n                cscale.x = curcs.width / precs.width;\r\n                cscale.y = curcs.height / precs.height;\r\n            }\r\n            if (Array.isArray(opts.matrix) && opts.matrix.length === 6) {\r\n                opts.matrix[4] *= cscale.x;\r\n                opts.matrix[5] *= cscale.y;\r\n                this._setMatrix(new Matrix(opts.matrix));\r\n            } else if (opts.matrix instanceof Matrix) {\r\n                opts.matrix.elements[4] *= cscale.x;\r\n                opts.matrix.elements[5] *= cscale.y;\r\n                this._setMatrix(opts.matrix);\r\n            }\r\n        }\r\n        \r\n        this.matrix = this._getMatrix();\r\n        this.originalTransition = this._getOriginalTransition();\r\n        this.Ancestry = new Ancestry(this);\r\n\r\n        this._setOffset();\r\n        this.Ancestry._setoffset();\r\n\r\n        this.dragging = false;\r\n        this.start = null;\r\n        this.orig = null;\r\n        this.zooma = 0.001;\r\n\r\n        this.events = {\r\n            start: opts.start,\r\n            move: opts.move,\r\n            stop: opts.stop,\r\n            tap: opts.tap,\r\n            transition: opts.transition\r\n        };\r\n\r\n        this.element.setAttribute('data-transformable-id', Transformable.Instance.push(this) - 1);\r\n        if (!navigator.userAgent.includes('Edge')) {\r\n            this.element.setAttribute('draggable', 'false');\r\n        }\r\n\r\n        if ((opts.attachevents ?? true) && opts.editable !== false) {\r\n            this._addEvents();\r\n            if (opts.resize) this.createResizeHandles(opts.resize);\r\n            if (!opts.disable?.rotate) this.createRotateHandles();\r\n            if (opts.handle && opts.type === 'rotator-box') this._addRotateEvents(opts.handle);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets any existing CSS transition that exists on the element.\r\n     * It will be merged with transition changes to preserve existing effects\r\n     */\r\n    _getOriginalTransition() {\r\n        const t = getComputedStyle(this.element).transition;\r\n        if (!t) return '';\r\n        return t.split(',').filter(part => !part.trim().startsWith('transform')).join(',');\r\n    }\r\n\r\n    /**\r\n     * Creates an HTML Element from a string.\r\n     * @param {String} str E.g. span, div etc\r\n     */\r\n    tag(str) {\r\n        const r = document.createElement('div');\r\n        r.innerHTML = str;\r\n        return r.firstChild;\r\n    }\r\n\r\n    /**\r\n     * Adds rotation handles on to the transformable element and wires up their events\r\n     * @param {String} typ \r\n     */\r\n    createRotateHandles(typ) {\r\n        if (typ && typ !== 'rotate') return;\r\n\r\n        const box = this.tag('<div class=\"transformable-rotation-box\"></div>');\r\n        const rot = this.tag('<svg class=\"transformable-svg-rotator\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 96 96\" style=\"enable-background:new 0 0 96 96;\" xml:space=\"preserve\"><g><circle style=\"fill:#00A8DF;\" cx=\"48.3\" cy=\"48\" r=\"35.3\"/><g><path style=\"fill:#FFFFFF;\" d=\"M35.2,3.8l4.1,28.5c0.2,1.5,2,2.1,3,1l8.2-8.2c0.7-0.7,1.8-0.7,2.5,0l8.8,8.8c7.8,7.8,9.1,20.2,1.2,28.2l-10,10c-0.7,0.7-1.8,0.7-2.5,0L41,62.6c-1-1-2.8-0.4-3,1l-4.1,28.5c-0.2,1.2,0.8,2.2,2,2l28.5-4.1c1.5-0.2,2.1-2,1-3l-8.9-8.9c-0.7-0.7-0.7-1.8,0-2.5l10-10c9.8-9.8,8.5-25.6-1.2-35.2l-8.8-8.8c-0.7-0.7-0.7-1.8,0-2.5L66.7,8.9c1-1,0.4-2.8-1-3L37.2,1.8C36,1.6,35,2.6,35.2,3.8z\"/><g style=\"opacity:0.5;\"><path d=\"M36.9,1.8c0.1,0,0.2,0,0.3,0l28.5,4.1c1.5,0.2,2.1,2,1,3L56.6,19.1c-0.7,0.7-0.7,1.8,0,2.5l8.8,8.8c9.7,9.7,11,25.5,1.2,35.2l-10,10c-0.7,0.7-0.7,1.8,0,2.5l8.9,8.9c1,1,0.4,2.8-1,3l-28.5,4.1c-0.1,0-0.2,0-0.3,0c-1.1,0-1.9-1-1.8-2.1l4.1-28.5c0.1-1,0.9-1.5,1.8-1.5c0.4,0,0.9,0.2,1.3,0.5l9.5,9.5c0.4,0.4,0.8,0.5,1.3,0.5s0.9-0.2,1.3-0.5l10-10c8-8,6.7-20.3-1.2-28.2L53,25.2c-0.4-0.4-0.8-0.5-1.3-0.5s-0.9,0.2-1.3,0.5l-8.2,8.2c-0.4,0.4-0.8,0.5-1.3,0.5c-0.8,0-1.7-0.6-1.8-1.5L35.2,3.8C35,2.7,35.9,1.8,36.9,1.8 M36.9-0.2c-1.1,0-2.1,0.5-2.9,1.3c-0.7,0.8-1,1.9-0.9,3l4.1,28.5c0.3,1.9,1.9,3.3,3.8,3.3c1,0,2-0.4,2.7-1.1l8.1-8.1l8.7,8.7c7.4,7.4,8,18.6,1.2,25.3l-9.8,9.8l-9.3-9.3c-0.7-0.7-1.7-1.1-2.7-1.1c-1.9,0-3.5,1.4-3.8,3.3l-4.1,28.5c-0.2,1.1,0.2,2.2,0.9,3c0.7,0.8,1.8,1.3,2.9,1.3c0.2,0,0.4,0,0.5,0l28.5-4.1c1.4-0.2,2.6-1.2,3.1-2.6c0.5-1.4,0.1-2.9-0.9-3.9l-8.7-8.7l9.8-9.8c10.2-10.2,9.6-27.2-1.2-38.1l-8.7-8.7l10-10c1-1,1.4-2.5,0.9-3.9c-0.5-1.4-1.6-2.4-3.1-2.6L37.5-0.2C37.3-0.2,37.1-0.2,36.9-0.2L36.9-0.2z\"/></g></g></g></svg>');\r\n        const anc = this.tag('<svg class=\"transformable-svg-anchor\" version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 96 96\" style=\"enable-background:new 0 0 96 96;\" xml:space=\"preserve\"><g><circle style=\"fill:#00A8DF;\" cx=\"47.6\" cy=\"48.4\" r=\"17.6\"/><g><path style=\"fill:#FFFFFF;\" d=\"M69,46H50V27.2c0-1.4-1.1-2.4-2.5-2.4S45,25.9,45,27.2V46H26.6c-1.4,0-2.4,1.1-2.4,2.5s1.1,2.5,2.4,2.5H45v18.6c0,1.4,1.1,2.4,2.5,2.4s2.5-1.1,2.5-2.4V51h19c1.4,0,2.4-1.1,2.4-2.5S70.3,46,69,46z\"/><g style=\"opacity:0.5;\"><path d=\"M47.5,24.8c1.4,0,2.5,1.1,2.5,2.4V46h19c1.4,0,2.4,1.1,2.4,2.5c0,1.4-1.1,2.5-2.4,2.5H50v18.6c0,1.4-1.1,2.4-2.5,2.4S45,70.9,45,69.6V51H26.6c-1.4,0-2.4-1.1-2.4-2.5c0-1.4,1.1-2.5,2.4-2.5H45V27.2C45,25.9,46.1,24.8,47.5,24.8 M47.5,22.8c-2.5,0-4.5,2-4.5,4.4V44H26.6c-2.5,0-4.4,2-4.4,4.5c0,2.5,2,4.5,4.4,4.5H43v16.6c0,2.5,2,4.4,4.5,4.4s4.5-2,4.5-4.4V53h17c2.5,0,4.4-2,4.4-4.5c0-2.5-2-4.5-4.4-4.5H52V27.2C52,24.8,50,22.8,47.5,22.8L47.5,22.8z\"/></g></g></g></svg>');\r\n        const lin = this.tag('<div class=\"transformable-rotation-line\"></div>');\r\n\r\n        box.append(lin, anc, rot, this.tag('<div class=\"transformable-anchor-point\"></div>'));\r\n\r\n        if (this.element.nodeName === 'IMG') {\r\n            this.parent.appendChild(box);\r\n        } else {\r\n            this.element.appendChild(box);\r\n        }\r\n\r\n        box.addEventListener('click', e => { e.stopPropagation(); return false; });\r\n\r\n        this.rotatorBox = new Transformable(box, { type: 'rotator-box', rotatetarget: this, handle: rot, disable: { zoom: true, rotate: true, resize: true } });\r\n\r\n        const _domouseup = () => {\r\n            if (this.rotatorBox?.parent) {\r\n                this.rotatorBox.parent.classList.remove('transformable-mousedown');\r\n            }\r\n            this.off(document.body, 'mouseup.rotatormouse');\r\n        };\r\n        const _domousedown = () => {\r\n            this.rotatorBox.parent.classList.add('transformable-mousedown');\r\n            this.on(document.body, 'mouseup.rotatormouse', _domouseup);\r\n        };\r\n        const _domouseleave = (e) => {\r\n            if (this._overTimer) clearTimeout(this._overTimer);\r\n\r\n            this._resizeTimer = setTimeout(() => {\r\n                this.element.classList.remove('transformable-resize-over');\r\n            }, 500);\r\n\r\n            e.currentTarget.classList.remove('transformable-over-active', 'transformable-over');\r\n        };\r\n        const _domouseenter = (tim) => {\r\n            if (tim.stopPropagation) tim.stopPropagation();\r\n            if (this._resizeTimer) clearTimeout(this._resizeTimer);\r\n\r\n            const target = this.rotatorBox.parent;\r\n            target.classList.add('transformable-over', 'transformable-resize-over');\r\n\r\n            this.Ancestry.Items.forEach(v => {\r\n                if (v._overTimer) clearTimeout(v._overTimer);\r\n            });\r\n\r\n            this._overTimer = setTimeout(() => {\r\n                const rb = this.rotatorBox;\r\n                if (parseFloat(getComputedStyle(rb.element).width) >= 32) {\r\n                    rb.parent.classList.add('transformable-over-active');\r\n                }\r\n                const l = this.Ancestry.Items.length;\r\n                this.Ancestry.Items.forEach((v, i) => {\r\n                    if (i < l - 2) {\r\n                        v.element.classList.remove('transformable-over-active');\r\n                    }\r\n                });\r\n            }, typeof tim === 'number' ? tim : 1500);\r\n        };\r\n\r\n        const rotparent = this.rotatorBox.parent;\r\n        this.on(rotparent, 'mouseenter.rotatormouse', _domouseenter);\r\n        this.on(rotparent, 'mouseleave.rotatormouse', _domouseleave);\r\n        this.on(rotparent, 'mousedown.rotatormouse', _domousedown);\r\n        this.on(rotparent, 'click.rotatormouse', () => _domouseenter.call(rotparent, 0));\r\n    }\r\n    \r\n    /**\r\n     * Creates resize handles on the transformable element and wires up their events\r\n     * @param {String} typ\r\n     */\r\n    createResizeHandles(typ) {\r\n        if (typ !== 'tl-br') return;\r\n        \r\n        const tl_svg = this.tag('<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"-271 394.9 52 52\" style=\"enable-background:new -271 394.9 52 52;\" xml:space=\"preserve\"><g><path style=\"fill:#00A8DF;\" d=\"M-244.9,421L-244.9,421L-244.9,421L-244.9,421L-244.9,421l26,0.1c0-10.8-6.1-20-16-24.1 c-10-4.1-20.8-2-28.4,5.7c-7.6,7.6-9.7,18.5-5.6,28.4c4.2,10,13.4,16,24.2,15.9L-244.9,421z\"/><path style=\"fill:none;stroke:#FFFFFF;stroke-width:3;\" d=\"M-251.6,414.3\"/><path style=\"fill:none;stroke:#FFFFFF;stroke-width:3;\" d=\"M-236.6,414.3\"/></g><g><path style=\"fill:#FFFFFF;\" d=\"M-227,419.5l-7.6-4.4c-1.1-0.6-2.4,0.2-2.4,1.4v1.9h-5.6v-5.5h2c1.2,0,2-1.3,1.4-2.4l-4.4-7.6 c-0.6-1.1-2.1-1.1-2.7,0l-4.4,7.6c-0.6,1.1,0.2,2.4,1.4,2.4h2v5.5h-5.6v-1.9c0-1.2-1.3-2-2.4-1.4l-7.6,4.4c-1.1,0.6-1.1,2.1,0,2.7 l7.6,4.4c1.1,0.6,2.4-0.2,2.4-1.4v-2h5.6v5.6h-2c-1.2,0-2,1.3-1.4,2.4l4.4,7.6c0.6,1.1,2.1,1.1,2.7,0l4.4-7.6 c0.6-1.1-0.2-2.4-1.4-2.4h-2v-5.6h5.6v2c0,1.2,1.3,2,2.4,1.4l7.6-4.4C-225.9,421.7-225.9,420.1-227,419.5z\"/><path style=\"opacity:0.5;fill:#231F20;\" d=\"M-245,402.1c0.5,0,1.1,0.3,1.4,0.8l4.4,7.6c0.6,1.1-0.2,2.4-1.4,2.4h-2v5.5h5.6v-1.9 c0-0.9,0.8-1.6,1.6-1.6c0.3,0,0.5,0.1,0.8,0.2l7.6,4.4c1.1,0.6,1.1,2.1,0,2.7l-7.6,4.4c-0.3,0.1-0.5,0.2-0.8,0.2 c-0.8,0-1.6-0.7-1.6-1.6v-2h-5.6v5.6h2c1.2,0,2,1.3,1.4,2.4l-4.4,7.6c-0.3,0.5-0.8,0.8-1.4,0.8c-0.5,0-1.1-0.3-1.4-0.8l-4.4-7.6 c-0.6-1.1,0.2-2.4,1.4-2.4h2v-5.6h-5.6v2c0,0.9-0.8,1.6-1.6,1.6c-0.3,0-0.5-0.1-0.8-0.2l-7.6-4.4c-1.1-0.6-1.1-2.1,0-2.7l7.6-4.4 c0.3-0.1,0.5-0.2,0.8-0.2c0.8,0,1.6,0.7,1.6,1.6v1.9h5.6v-5.5h-2c-1.2,0-2-1.3-1.4-2.4l4.4-7.6C-246.1,402.3-245.5,402.1-245,402.1 M-245,400.6c-1.1,0-2.1,0.6-2.6,1.5l-4.4,7.6c-0.5,0.9-0.5,2.1,0,3c0.5,0.9,1.5,1.5,2.6,1.5h0.5v2.7h-2.7v-0.5c0-1.7-1.4-3-3-3 c-0.5,0-1,0.1-1.5,0.4l-7.6,4.4c-0.9,0.5-1.5,1.5-1.5,2.6c0,1.1,0.6,2.1,1.5,2.6l7.6,4.4c0.5,0.3,1,0.4,1.5,0.4c1.7,0,3-1.4,3-3\tv-0.6h2.7v2.8h-0.5c-1.1,0-2.1,0.6-2.6,1.5c-0.5,0.9-0.5,2.1,0,3l4.4,7.6c0.5,0.9,1.5,1.5,2.6,1.5c1.1,0,2.1-0.6,2.6-1.5l4.4-7.6 c0.5-0.9,0.5-2.1,0-3c-0.5-0.9-1.5-1.5-2.6-1.5h-0.5v-2.8h2.7v0.6c0,1.7,1.4,3,3,3c0.5,0,1-0.1,1.5-0.4l7.6-4.4\tc0.9-0.5,1.5-1.5,1.5-2.6c0-1.1-0.6-2.1-1.5-2.6l-7.6-4.4c-0.5-0.3-1-0.4-1.5-0.4c-1.7,0-3,1.4-3,3v0.5h-2.7v-2.7h0.5\tc1.1,0,2.1-0.6,2.6-1.5c0.5-0.9,0.5-2.1,0-3l-4.4-7.6C-242.9,401.2-243.9,400.6-245,400.6L-245,400.6z\"/></g></svg>');\r\n        const br_svg = this.tag('<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"-271 394.9 52 52\" style=\"enable-background:new -271 394.9 52 52;\" xml:space=\"preserve\"><g><path style=\"fill:#00A8DF;\" d=\"M-245,420.9L-245,420.9L-245,420.9L-245,420.9L-245,420.9l-26-0.1c0,10.8,6.1,20,16,24.1 c10,4.1,20.8,2,28.4-5.7c7.6-7.6,9.7-18.5,5.6-28.4c-4.2-10-13.4-16-24.2-15.9L-245,420.9z\"/></g><g><path style=\"fill:#FFFFFF;\" d=\"M-245.8,423l-2.5-2.5l-2.1,2.1c-0.9,0.9-2.3,0.5-2.6-0.7l-1.6-9.2c-0.3-1.2,0.8-2.3,1.9-1.9l9.2,1.6 c1.2,0.3,1.6,1.8,0.7,2.6l-2.1,2.1l2.5,2.5l2.7,2.7l-1-1l2.1-2.1c0.9-0.9,2.3-0.5,2.6,0.7l1.6,9.2c0.3,1.2-0.8,2.3-1.9,1.9 l-9.2-1.6c-1.2-0.3-1.6-1.8-0.7-2.6l2.1-2.1l-3.2-3.2L-245.8,423z\"/><path style=\"opacity:0.5;fill:#231F20;\" d=\"M-239.6,422.3l-1-1l2.1-2.1c0.7-0.7,1.7-0.6,2.2,0c0.2,0.2,0.3,0.4,0.4,0.7l1.6,9.2 c0.3,1.2-0.8,2.3-1.9,1.9l-9.2-1.6c-0.3-0.1-0.5-0.2-0.7-0.4c-0.6-0.6-0.7-1.6,0-2.2l2.1-2.1l-3.2-3.2l1.5,1.5l-2.5-2.5l-2.1,2.1 c-0.7,0.7-1.7,0.6-2.2,0c-0.2-0.2-0.3-0.4-0.4-0.7l-1.6-9.2c-0.3-1.2,0.8-2.3,1.9-1.9l9.2,1.6c0.3,0.1,0.5,0.2,0.7,0.4 c0.6,0.6,0.7,1.6,0,2.2l-2.1,2.1l2.5,2.5L-239.6,422.3z M-242.3,417.5l-0.5-0.5l1-1c1.2-1.2,1.2-3.1,0-4.3 c-0.4-0.4-0.8-0.6-1.4-0.8l-9.2-1.6c-1.1-0.3-2.1,0-2.9,0.8c-0.8,0.8-1.1,1.9-0.8,2.9l1.6,9.2c0.1,0.5,0.4,1,0.8,1.4 c1.2,1.2,3.1,1.2,4.3,0l1.1-1.1l0.5,0.5l0.5,0.5l1.2,1.2l-1.1,1.1c-1.2,1.2-1.2,3.1,0,4.3c0.4,0.4,0.8,0.6,1.4,0.8l9.2,1.6 c1.1,0.3,2.1,0,2.9-0.8c0.8-0.8,1.1-1.9,0.8-2.9l-1.6-9.2c-0.1-0.5-0.4-1-0.8-1.4c-1.2-1.2-3.1-1.2-4.3,0l-1,1l-1.2-1.2\"/></g></svg>');\r\n\r\n        const tlb = this.tag('<div class=\"transformable-resize-button\"></div>');\r\n        const brb = tlb.cloneNode();\r\n\r\n        tlb.classList.add('tl');\r\n        tlb.appendChild(tl_svg);\r\n        brb.classList.add('br');\r\n        brb.appendChild(br_svg);\r\n\r\n        this.resizertl = tlb;\r\n        this.resizerbr = brb;\r\n\r\n        this.element.appendChild(tlb);\r\n        this.element.appendChild(brb);\r\n        this._addResizeEvents(tlb, brb);\r\n    }\r\n    \r\n    /**\r\n     * Zooms the element centred on the middle of the parent element in increments of 5%.\r\n     * @param {Number} dir positive numbers make it bigger, negative make it smaller\r\n     */\r\n    zoom(dir) {\r\n        const offset = this.Ancestry.OffsetFromPoint(this._findCentreInWindow());\r\n        this.scale(offset, 1 + dir * 0.05);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Scales the transformable element at point p by s amount\r\n     * @param {Point} p Origin for the transform on the element\r\n     * @param {any} s scale amount\r\n     */\r\n    scale(p, s) {\r\n        this.matrix.scale(p, s);\r\n        this.setTransition(true);\r\n        this._updateElement();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Translates the element by x and y. Uses element pixels before any transform. Not window/screen pixels.\r\n     * @param {Number} x Pixels horizontal\r\n     * @param {Number} y Pixels vertical\r\n     * @param {Boolean} transition Use a transition\r\n     */\r\n    translate(x, y, transition) {\r\n        this.matrix.translate(x, y);\r\n        this.setTransition(transition);\r\n        this._updateElement();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Rotates the element about point p. Or about the centre of the element if p is not supplied. \r\n     * If inwindow==true, you can supply a Point in the window coordinate space and have the element rotate about that.\r\n     * @param {Point} p The origin of the rotation in pixels on the element. When inwindow == false or undefined\r\n     * @param {Number} a Angle in degrees\r\n     * @param {Boolean} trans Optional: Specify if a transition should be used\r\n     * @param {Boolean} inwindow Optional: If true, p should be treated like a window coordinate. \r\n     */\r\n    rotate(p, a, trans, inwindow) {\r\n        let rotationPoint = p;\r\n        if (!(rotationPoint instanceof Point) || !rotationPoint) {\r\n            rotationPoint = this.Ancestry.OffsetFromPoint(this._findCentreInWindow());\r\n        }\r\n\r\n        if (rotationPoint instanceof Point && inwindow) {\r\n            rotationPoint = this.Ancestry.OffsetFromPoint(rotationPoint);\r\n        }\r\n\r\n        this.matrix.rotate(rotationPoint, a);\r\n        this.lastrotationpoint = rotationPoint;\r\n        if (typeof trans === 'undefined' || trans === false) {\r\n            this.setTransition(false);\r\n        }\r\n\r\n        this._updateElement();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Makes a rotated element horizontal.\r\n     */\r\n    straighten() {\r\n        const r = this.matrix.rotation();\r\n        this.rotate(new Point(this.sizes.element.initial.width / 2, this.sizes.element.initial.height / 2), -r, true);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Scales the element to make the element's height or width match that of the parent element. Centres it and straightens out any rotation. \r\n     */\r\n    fittoparent() {\r\n        const sz = new Point(this.sizes.element.initial.width, this.sizes.element.initial.height);\r\n        const anc = this.Ancestry;\r\n        const pars = anc.GetParents();\r\n        const parentT = anc.FirstParent();\r\n        const pr = parentT.rect;\r\n        const m = this.matrix.inverse();\r\n        const tl = m.transformpoint(pr.topleft);\r\n        const tr = m.transformpoint(pr.topright);\r\n        const bl = m.transformpoint(pr.bottomleft);\r\n        const psiz = new Point(this._distanceBetweenPoints(tl, tr), this._distanceBetweenPoints(tl, bl));\r\n\r\n        const sc = psiz.divide(sz);\r\n        const scale = Math.min(sc.x, sc.y);\r\n        this.scale(new Point(0, 0), scale);\r\n        this.centreinparent(true, pars);\r\n        this.straighten();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Scales the element so its width and height is equal or greater than the parent element. \r\n     * Basically so you can't see any background in the parent element. Also centres and straightens it.\r\n     */\r\n    filltoparent() {\r\n        const sz = new Point(this.sizes.element.initial.width, this.sizes.element.initial.height);\r\n        const anc = this.Ancestry;\r\n        const pars = anc.GetParents();\r\n        const parentT = anc.FirstParent();\r\n        const pr = parentT.rect;\r\n        const m = this.matrix.inverse();\r\n        const tl = m.transformpoint(pr.topleft);\r\n        const tr = m.transformpoint(pr.topright);\r\n        const bl = m.transformpoint(pr.bottomleft);\r\n        const psiz = new Point(this._distanceBetweenPoints(tl, tr), this._distanceBetweenPoints(tl, bl));\r\n\r\n        const sc = psiz.divide(sz);\r\n        const scale = Math.max(sc.x, sc.y);\r\n\r\n        this.scale(new Point(0, 0), scale);\r\n        this.centreinparent(true, pars);\r\n        this.straighten();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets the boundingClientRect for supplied element.\r\n     * @param {HTMLElement} el\r\n     */\r\n    _getRect(el) {\r\n        return el.getBoundingClientRect();\r\n    }\r\n\r\n    /**\r\n     * Resets the transformation to its starting value. Undoing all changes since instantiation.\r\n     * @param {Boolean} trans Specify if a transition should be used\r\n     */\r\n    reset(trans) {\r\n        if (!this.InitialMatrix) {\r\n            this.matrix.reset();\r\n        } else {\r\n            this.matrix.elements = [...this.InitialMatrix];\r\n        }\r\n\r\n        this.setTransition(trans ?? true);\r\n        if (this.transition) {\r\n            if (this.delta?.x || this.delta?.y) { // has moved so will transition\r\n                this.element.classList.add('transformable-reset');\r\n                this.on(this.element, 'transitionend.reset', () => {\r\n                    this.element.classList.remove('transformable-reset');\r\n                    this.off(this.element, 'transitionend.reset');\r\n                });\r\n            }\r\n        }\r\n        this._updateElement();\r\n        return this;\r\n    }\r\n    \r\n    /**\r\n     * Returns true if the undo stack contains a saved state named k\r\n     * @param {String} k\r\n     */\r\n    hasHistoryKey(k) {\r\n        return Array.isArray(this.matrix.history.undo[k]);\r\n    }\r\n    \r\n    /**\r\n     * Undo the last transformation or go back to a named state.\r\n     * @param {String} k Optional: the name of a saved state to go back to\r\n     */\r\n    undo(k) {\r\n        this.matrix.undo(k);\r\n        this.setTransition(true);\r\n        this._updateElement();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Redo the last thing that was undone.\r\n     */\r\n    redo() {\r\n        this.matrix.redo();\r\n        this.setTransition(true);\r\n        this._updateElement();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Sets initial sizes and positions of the element and window\r\n     */\r\n    setInitialSizes() {\r\n        if (this.sizes) return;\r\n        \r\n        const cs = window.getComputedStyle(this.element);\r\n        const w = parseFloat(cs.width);\r\n        const h = parseFloat(cs.height);\r\n        const l = parseFloat(cs.left);\r\n        const t = parseFloat(cs.top);\r\n\r\n        this.sizes = {\r\n            element: {\r\n                initial: {\r\n                    offset: new Point(l, t),\r\n                    width: w,\r\n                    height: h,\r\n                    topleft: new Point(0, 0),\r\n                    topright: new Point(w, 0),\r\n                    bottomright: new Point(w, h),\r\n                    bottomleft: new Point(0, h)\r\n                }\r\n            },\r\n            window: { width: parseFloat(getComputedStyle(document.body.parentNode).width) }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Gets the offset of an element taking in to account scroll position of the window\r\n     * @param {HTMLElement} el Element to check\r\n     */\r\n    _getOffset(el) {\r\n        const cr = this._getRect(el);\r\n        const scroll = this.Ancestry._getScroll();\r\n        const cs = getComputedStyle(el);\r\n        const pos = new Point(parseFloat(cs.left), parseFloat(cs.top));\r\n        const os = new Point(cr.left + scroll.x, cr.top + scroll.y);\r\n        const br = new Point(cr.right, cr.bottom);\r\n        const tr = new Point(cr.right, cr.top);\r\n        const bl = new Point(cr.left, cr.bottom);\r\n\r\n        return { offset: os, topleft: os, bottomright: br, topright: tr, bottomleft: bl, pos: pos };\r\n    }\r\n    \r\n    /**\r\n     * Sets the initial offset.  \r\n     */\r\n    _setOffset() {\r\n        if (!this.offset) {\r\n            const too = this._getOffset(this.element, true);\r\n            this.offset = too.offset;\r\n            this.initialoffset = too.offset;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Convert a string representation of a CSS transformation matrix in to an Array\r\n     * @param {String} t The CSS transformation\r\n     */\r\n    _cssStringToArray(t) {\r\n        const match = t.match(/[0-9e., -]+/);\r\n        if (!match) return [];\r\n        return match[0].split(\", \").map(v => parseFloat(v));\r\n    }\r\n    \r\n    /**\r\n     * Converts a 6 element Array in to a CSS transformation string.\r\n     * @param {Array} a \r\n     */\r\n    _arrayToCssString(a) {\r\n        return `matrix(${a.join(',')})`;\r\n    }\r\n\r\n    /**\r\n     * Creates a Matrix for the transformable element. \r\n     * Cancels out any CSS that affects the offset or position of the element and converts to an equivalent CSS transformation matrix.\r\n     * @param {HTMLElement} el\r\n     */\r\n    _getMatrix(el) {\r\n        const elem = el || this.element;\r\n        const cs = getComputedStyle(elem);\r\n        const pcs = getComputedStyle(this.parent);\r\n        const { transform: t, top: csTop, left: csLeft, marginTop, marginLeft, borderTopWidth, borderLeftWidth } = cs;\r\n        \r\n        const top = csTop.includes('%') ? (parseFloat(pcs.height) * parseFloat(csTop) / 100) : parseFloat(csTop);\r\n        const left = csLeft.includes('%') ? (parseFloat(pcs.width) * parseFloat(csLeft) / 100) : parseFloat(csLeft);\r\n        const margintop = parseFloat(marginTop);\r\n        const marginleft = parseFloat(marginLeft);\r\n        const bordertop = parseFloat(borderTopWidth);\r\n        const borderleft = parseFloat(borderLeftWidth);\r\n\r\n        let mElements;\r\n        if (/matrix\\(-?[0-9e., -]+\\)/.test(t)) {\r\n            mElements = this._cssStringToArray(t);\r\n            if (!this.InitialMatrix) {\r\n                this.InitialMatrix = [...mElements];\r\n            }\r\n        }\r\n        \r\n        const m = new Matrix(mElements || [1, 0, 0, 1, 0, 0]);\r\n        \r\n        if (left || top || margintop || marginleft || bordertop || borderleft) {\r\n            m.translate(left || 0, top || 0);\r\n            m.translate(marginleft || 0, margintop || 0);\r\n            m.translate(borderleft || 0, bordertop || 0);\r\n            Object.assign(elem.style, {\r\n                marginTop: '0px',\r\n                marginLeft: '0px',\r\n                top: '0px',\r\n                left: '0px'\r\n            });\r\n            elem.style.marginTop = (-(bordertop || 0)) + 'px';\r\n            elem.style.marginLeft = (-(bordertop || 0)) + 'px';\r\n\r\n            this.matrix = m;\r\n            this._updateElement();\r\n            this.InitialMatrix = [...m.elements];\r\n        }\r\n        return m;\r\n    }\r\n\r\n    /**\r\n     * Sets the transition to use for transforms. \r\n     * Retains any existing transition originally set by CSS\r\n     * @param {Boolean} bool If true will use a transition\r\n     */\r\n    setTransition(bool) {\r\n        if (typeof bool !== 'boolean' || this.transition === bool) return;\r\n\r\n        const currentSplits = this.originalTransition ? this.originalTransition.split(',') : [];\r\n        if (bool) {\r\n            currentSplits.push('transform 0.5s');\r\n        } else {\r\n            currentSplits.push('transform 0s');\r\n        }\r\n        this.element.style.transition = currentSplits.join(',');\r\n        this.transition = bool;\r\n    }\r\n\r\n    /**\r\n     * Sets the CSS transform on the element.\r\n     */\r\n    _updateElement() {\r\n        this.element.style.transform = `matrix(${this.matrix.elements.join(',')})`;\r\n    }\r\n\r\n    /**\r\n     * Adds the current matrix to the undo stack.\r\n     */\r\n    _pushhistory() {\r\n        this.matrix.save();\r\n    }\r\n\r\n    /**\r\n     * Sets the matrix property on this instance and applies the CSS.\r\n     * @param {Matrix} m\r\n     */\r\n    _setMatrix(m) {\r\n        this.matrix = m;\r\n        this._updateElement();\r\n    }\r\n\r\n    /**\r\n     * Gets the window coordinates of a mouse or touch event.\r\n     * Also gets the angle and centre point between two touches\r\n     * * @param {Event} e\r\n     * @param {Array} touches\r\n     */\r\n    _getPageXY(e, touches) {\r\n        let xy, ang, p1, p2;\r\n        if (touches) {\r\n            if (touches.length === 2) {\r\n                xy = this._getMiddle(touches);\r\n                ang = this._getRotation(touches);\r\n                p1 = new Point(touches[0].pageX, touches[0].pageY);\r\n                p2 = new Point(touches[1].pageX, touches[1].pageY);\r\n            } else {\r\n                xy = new Point(touches[0].pageX, touches[0].pageY);\r\n                ang = this.matrix.rotation();\r\n            }\r\n        } else {\r\n            xy = new Point(e.pageX, e.pageY);\r\n            ang = this.matrix.rotation();\r\n        }\r\n        return { point: xy, angle: ang, p1, p2 };\r\n    }\r\n\r\n    /**\r\n     * Gets offset (point in element coordinate space), \r\n     * window coordinates of the event and angle, distance and centre between two touches.\r\n     * @param {Event} e\r\n     * @param {Array} touches\r\n     */\r\n    _getPoint2(e, touches) {\r\n        const dat = this._getPageXY(e, touches);\r\n        const anc = this.Ancestry;\r\n        const pars = anc.GetParents();\r\n        const op = anc.OffsetFromPoint(dat.point, pars);\r\n        const dist = dat.p1 && dat.p2 ?\r\n            this._distanceBetweenPoints(\r\n                anc.OffsetFromPoint(dat.p1, pars),\r\n                anc.OffsetFromPoint(dat.p2, pars)\r\n            ) : 0;\r\n\r\n        let deltaXY = null;\r\n        if (typeof e.deltaX !== 'undefined') {\r\n            deltaXY = new Point(e.deltaX, e.deltaY);\r\n        }\r\n\r\n        return {\r\n            offset: op,\r\n            pageXY: dat.point,\r\n            pageX: dat.point.x,\r\n            pageY: dat.point.y,\r\n            angle: dat.angle,\r\n            distance: dist,\r\n            deltaXY\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Calculates the distance between two points\r\n     * @param {Point} a First point\r\n     * @param {Point} b Second point\r\n     */\r\n    _distanceBetweenPoints(a, b) {\r\n        const prop = a.pageX ? { x: 'pageX', y: 'pageY' } : { x: 'x', y: 'y' };\r\n        return Math.sqrt(Math.pow(Math.abs(b[prop.x] - a[prop.x]), 2) + Math.pow(Math.abs(b[prop.y] - a[prop.y]), 2));\r\n    }\r\n\r\n    /**\r\n     * Gets the centre point between two touches\r\n     * @param {Array} touches\r\n     */\r\n    _getMiddle(touches) {\r\n        const [touch1, touch2] = touches;\r\n        const mx = ((touch2.pageX - touch1.pageX) / 2) + touch1.pageX;\r\n        const my = ((touch2.pageY - touch1.pageY) / 2) + touch1.pageY;\r\n        return new Point(mx, my);\r\n    }\r\n\r\n    /**\r\n     * Gets distance between two touch points (in the window) relative to the element.\r\n     * @param {Array} touches\r\n     * @param {Array} pars\r\n     */\r\n    _getDistance2(touches, pars) {\r\n        const anc = this.Ancestry;\r\n        const parentElements = pars || anc.GetParents();\r\n        const t1 = anc.OffsetFromPoint(new Point(touches[0].pageX, touches[0].pageY), parentElements);\r\n        const t2 = anc.OffsetFromPoint(new Point(touches[1].pageX, touches[1].pageY), parentElements);\r\n        return this._distanceBetweenPoints(t1, t2);\r\n    }\r\n\r\n    /**\r\n     * Gets the angle in degrees between two touch points\r\n     * @param {Array} touches\r\n     * @param {Boolean} norm Optional: Normalise to be 0-365 degrees\r\n     */\r\n    _getRotation(touches, norm) {\r\n        const r = Math.atan2((touches[0].pageY || touches[0].y) - (touches[1].pageY || touches[1].y), (touches[0].pageX || touches[0].x) - (touches[1].pageX || touches[1].x)) * 180 / Math.PI;\r\n        return norm ? this.matrix.normaldegree(r) : r;\r\n    }\r\n    \r\n    /**\r\n     * Snaps the rotation to a multiple of 15 degrees if within 3 degrees of a multiple of 15 degrees.\r\n     */\r\n    snapRotation() {\r\n        if (this.options.disable?.rotate) return;\r\n\r\n        let r = this.matrix.rotation();\r\n        const m = r - (15 * Math.round(r / 15));\r\n        const am = Math.abs(m);\r\n        const siz = this.sizes.element.initial;\r\n        this.setTransition(true);\r\n\r\n        if (am <= 3 && am > 0) {\r\n            const pt = this.lastrotationpoint || new Point(siz.width / 2, siz.height / 2);\r\n            this.rotate(pt, -m);\r\n            this.lastlastrotationpoint = undefined;\r\n            this._pushhistory();\r\n        }\r\n        \r\n        r = this.matrix.rotation();\r\n        let msg;\r\n        switch (Math.abs(Math.round(r * 10) / 10)) {\r\n            case 0:\r\n            case 180:\r\n                msg = 'Horizontal';\r\n                break;\r\n            case 90:\r\n                msg = 'Vertical';\r\n                break;\r\n            default:\r\n                msg = `Rotation: ${Math.round(r * 10) / 10}&deg;`;\r\n        }\r\n        this.showMessage(msg, 'sticky', 2000);\r\n    }\r\n    \r\n    /**\r\n     * Writes info to the console\r\n     * @param {String} m\r\n     * @param {any} c Not implemented\r\n     * @param {any} t Not implemented\r\n     */\r\n    showMessage(m, c, t) {\r\n        console.log(m);\r\n    }\r\n\r\n    /**\r\n     * Gets the centre point of the element in window coordinates\r\n     */\r\n    _findCentreInWindow() {\r\n        const prect = this._getRect(this.parent);\r\n        return new Point(prect.left + prect.width / 2, prect.top + prect.height / 2);\r\n    }\r\n\r\n    /**\r\n     * Centres the element in the middle of its parent element\r\n     * @param {Boolean} transition Optional\r\n     * @param {Array} pars Optional but should always be supplied\r\n     */\r\n    centreinparent(transition, pars) {\r\n        const was = this.transition;\r\n        this.setTransition(transition);\r\n        const parentElements = pars || this.Ancestry.GetParents();\r\n        const pcs = getComputedStyle(this.parent);\r\n        const parentCentre = new Point(parseFloat(pcs.width) / 2, parseFloat(pcs.height) / 2);\r\n        const centreOnThis = this.matrix.inverse().transformpoint(parentCentre);\r\n        this.translate(centreOnThis.sub(new Point(this.sizes.element.initial.width / 2, this.sizes.element.initial.height / 2)));\r\n        this.setTransition(was);\r\n    }\r\n\r\n    /**\r\n     * Find out if point p is within the rectangle defined by points a,b,c,d\r\n     * @param {Point} p\r\n     * @param {Point} a\r\n     * @param {Point} b\r\n     * @param {Point} c\r\n     * @param {Point} d\r\n     */\r\n    pointInRectangle(p, a, b, c, d) {\r\n        const ab = b.sub(a);\r\n        const ap = p.sub(a);\r\n        const bc = c.sub(b);\r\n        const bp = p.sub(b);\r\n        const dot_abap = ab.dot(ap);\r\n        const dot_abab = ab.dot(ab);\r\n        const dot_bcbp = bc.dot(bp);\r\n        const dot_bcbc = bc.dot(bc);\r\n        return {\r\n            dot_abap,\r\n            dot_abab,\r\n            dot_bcbp,\r\n            dot_bcbc,\r\n            ok: 0 <= dot_abap && (Math.round(dot_abap * 10) / 10) <= (Math.round(dot_abab * 10) / 10) && 0 <= dot_bcbp && (Math.round(dot_bcbp * 10) / 10) <= (Math.round(dot_bcbc * 10) / 10)\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Triggers an event named n. \r\n     * In the handler, this will refer to the Transformable instance.\r\n     * The handler will receive the transformable element as first argument and a real event object as the second argument.\r\n     * @param {String} n\r\n     * @param {Event} event Pass in a real event object if you have one\r\n     */\r\n    trigger(n, event) {\r\n        if (typeof this.events[n] === \"function\") {\r\n            this.events[n].call(this, this.element, event);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the points data needed to make rotation handles work\r\n     * @param {Event} e\r\n     * @param {Array} pars\r\n     */\r\n    _getRotatorPoints(e, pars) {\r\n        const anc = this.Ancestry;\r\n        const parentElements = pars || anc.GetParents();\r\n        anc._setoffset();\r\n        const touches = e.touches;\r\n        const rpoint = touches ? new Point(touches[0].pageX, touches[0].pageY) : new Point(e.pageX, e.pageY);\r\n        const apoint = this.anchor.TL;\r\n        const angle = Math.round(this._getRotation([apoint.add(anc.scroll), rpoint], false) * 100) / 100;\r\n        return {\r\n            deltaXY: null,\r\n            offset: anc.OffsetFromPoint(rpoint, parentElements),\r\n            pageXY: rpoint,\r\n            pageX: rpoint.x,\r\n            pageY: rpoint.y,\r\n            angle: angle,\r\n            distance: 0\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Attaches events for rotation interactions with rotation handles\r\n     * @param {HTMLElement} hdl The element to use as a rotation handle\r\n     */\r\n    _addRotateEvents(hdl) {\r\n        const _dostart = e => {\r\n            if (this.options.disabled || this.startedresize) return;\r\n            \r\n            if(document.querySelectorAll('.transformable-active').length == 0)\r\n                this.element.classList.add('transformable-active');\r\n\r\n            const m = this.matrix;\r\n            this.origrotate = {\r\n                trans: new Point(m.elements[4], m.elements[5]),\r\n                angle: m.rotation(true),\r\n                scale: m.scaling(),\r\n            };\r\n\r\n            const touches = e.touches;\r\n            if (touches?.length === 2)\r\n                if (touches[0].target && touches[1].target)\r\n                    if (touches[0].target !== touches[1].target) {\r\n                        console.log('Two active elements not supported');\r\n                        return false;\r\n                    }\r\n\r\n            this.anchor = this.anchor || {};\r\n            this.anchor.clientRect = this._getRect(this.element.querySelector('.transformable-anchor-point'));\r\n            this.anchor.TL = new Point(this.anchor.clientRect.left, this.anchor.clientRect.top);\r\n            this.startrotate = this._getRotatorPoints(e);\r\n            this.startrotate.scale = this.origrotate.scale;\r\n            this.startedrotate = true;\r\n            this.draggingrotate = false;\r\n            this.setTransition(false);\r\n            e.stopPropagation();\r\n\r\n            if (e.type === 'mousedown') {\r\n                this.on(document.body, 'mousemove.transformable', _domove);\r\n                this.on(document.body, 'mouseup.transformable dragend.transformable', _dostop);\r\n            }\r\n        };\r\n\r\n        const _domove = e => {\r\n            if (!this.startedrotate) return;\r\n            this.draggingrotate = true;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            if (e.touches?.length === 2) return;\r\n\r\n            const point = this._getRotatorPoints(e);\r\n            const delta = { angle: Math.round((point.angle - this.startrotate.angle) * 100) / 100 };\r\n            \r\n            if (delta.angle !== 0) {\r\n                if (this.parent !== this.options.rotatetarget.element) {\r\n                    this.matrix.rotateAboutPoint(new Point(0), delta.angle);\r\n                    this._updateElement();\r\n                }\r\n                if (this.options.rotatetarget instanceof Transformable) {\r\n                    this.options.rotatetarget.rotate(this.anchor.TL.add(this.Ancestry.scroll), delta.angle, false, true);\r\n                }\r\n            }\r\n            this.startrotate.angle = point.angle;\r\n        };\r\n        \r\n        const _dostop = e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this.element.classList.remove('transformable-active');\r\n            this.startedrotate = false;\r\n            this.draggingrotate = false;\r\n            this.off(document.body, 'mouseup.transformable dragend.transformable');\r\n\r\n            if (this.options.rotatetarget instanceof Transformable) {\r\n                if (this.options.rotatetarget.events.stop)\r\n                    this.options.rotatetarget.trigger('stop', e);\r\n\r\n                this.options.rotatetarget.snapRotation();\r\n            }\r\n            if (this.events.stop)\r\n                this.trigger('stop', e);\r\n\r\n            this.snapRotation();\r\n        };\r\n\r\n        this.on(hdl, 'mousedown.transformable touchstart.transformable', _dostart);\r\n        this.on(hdl, 'touchmove.transformable', _domove);\r\n        this.on(hdl, 'touchend.transformable', _dostop);\r\n    }\r\n\r\n    /**\r\n     * Attaches events for resize interactions with resize handles\r\n     * @param {HTMLElement} tlb Top left button/handle used for moving the element\r\n     * @param {HTMLElement} brb Bottom right button/handle for resizing the element's width/height\r\n     */\r\n    _addResizeEvents(tlb, brb) {\r\n        const _dostart = e => {\r\n            if (!document.querySelector('.transformable-active')) {\r\n                this.element.classList.add('transformable-active');\r\n            }\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            const m = this.matrix;\r\n            this.origresize = {\r\n                trans: new Point(m.elements[4], m.elements[5]),\r\n                angle: m.rotation(),\r\n                scale: m.scaling()\r\n            };\r\n            this.startresize = this._getPoint2(e, e.touches);\r\n            this.startresize.scale = this.origresize.scale;\r\n            this.startedresize = true;\r\n            this.draggingresize = false;\r\n            const cs = getComputedStyle(this.element);\r\n            this.h = parseFloat(cs.height);\r\n            this.w = parseFloat(cs.width);\r\n            this.contained = this.contained ?? true;\r\n            this.trigger('startresize', e);\r\n            this.setTransition(false);\r\n            if (e.type === 'mousedown') {\r\n                this.on(document.body, 'mousemove.transformable', _domove);\r\n                this.on(document.body, 'mouseup.transformable dragend.transformable', _dostop);\r\n            }\r\n        };\r\n\r\n        const _domove = e => {\r\n            if (!this.element.classList.contains('transformable-active') || !this.startedresize) return;\r\n            this.draggingresize = true;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            if (e.touches?.length === 2) return;\r\n\r\n            const point = this._getPoint2(e, e.touches);\r\n            const start = this.startresize;\r\n            const delta = { \r\n                trans: point.offset.sub(this.startresize.offset),\r\n                angle: Math.round((point.angle - start.angle) * 100) / 100,\r\n                distance: start.distance != 0 ? Math.round(point.distance / ((start.distance + point.distance)/2) * 1000) / 1000 : 0\r\n            };\r\n\r\n            if (delta.trans.nonzero()) {\r\n                const cs = getComputedStyle(this.element);\r\n                const h = parseFloat(cs.height);\r\n                const w = parseFloat(cs.width);\r\n                const dw = this.w - w;\r\n                const dh = this.h - h;\r\n                const neww = w + delta.trans.x + dw;\r\n                const newh = h + delta.trans.y + dh;\r\n                this.element.style.width = `${neww}px`;\r\n                this.element.style.height = `${newh}px`;\r\n                this.sizes.element.initial.bottomright = new Point(neww, newh);\r\n                this.sizes.element.initial.topright.x = neww;\r\n                this.sizes.element.initial.bottomleft.y = newh;\r\n                this.sizes.element.initial.width = neww;\r\n                this.sizes.element.initial.height = newh;\r\n            }\r\n            this.startresize.angle = point.angle;\r\n        };\r\n\r\n        const _dostop = () => {\r\n            this.off(document.body, 'mousemove.transformable', _domove);\r\n            this.off(document.body, 'mouseup.transformable dragend.transformable', _dostop);\r\n            if (this.options.disabled) return;\r\n            this.element.classList.remove('transformable-active');\r\n            this.startedresize = false;\r\n            this.draggingresize = false;\r\n        };\r\n\r\n        this.on(brb, 'mousedown.transformable', _dostart);\r\n        this.on(brb, 'touchstart.transformable', _dostart);\r\n        this.on(brb, 'touchmove.transformable', _domove);\r\n        this.on(brb, 'touchend.transformable', _dostop);\r\n    }\r\n    \r\n    /**\r\n     * Gets the quadrant based on angle r and wether the angle is horizontal or vertical\r\n     * @param {Number} r\r\n     */\r\n    getRotationQuadrant(r) {\r\n        const rot = (r ?? this.matrix.rotation()) % 360;\r\n        const normalizedRot = rot < 0 ? rot + 360 : rot;\r\n        return { Angle: normalizedRot, Quad: Math.floor(normalizedRot / 90), Horiz: normalizedRot === 0 || normalizedRot === 180, Vert: normalizedRot === 90 || normalizedRot === 270 };\r\n    }\r\n    \r\n    /**\r\n     * Attaches events for scaling, rotating and moving elements. \r\n     * Calculates and applies containment too.\r\n     */\r\n    _addEvents() {\r\n        if (typeof this.events.transition === 'function') {\r\n            this.element.addEventListener('transitionend', this.events.transition);\r\n        }\r\n\r\n        const _dostart = e => {\r\n            if (this.options.disabled || this.startedresize || this.startedrotate) return;\r\n            if (!document.querySelector('.transformable-active')) {\r\n                this.element.classList.add('transformable-active');\r\n            }\r\n            if (this.options.type === 'rotator-box') {\r\n                const rb = e.target.closest('svg');\r\n                if (rb && !rb.classList.contains('transformable-svg-anchor')) \r\n                    return false;\r\n                else\r\n                    e.stopPropagation();\r\n            }\r\n\r\n            const touches = e.touches;\r\n            this.start = this._getPoint2(e, touches);\r\n            const ww = this.sizes.window;\r\n            if (this.start.pageX < 40 || this.start.pageX > ww.width - 40) { // don't translate if history navigation can happen from swiping at the edges of webpage.  e.g. on a touch device\r\n                console.log('edge cancel.');\r\n                return false;\r\n            }\r\n            this.delta = { x: 0, y: 0 };\r\n            if (touches?.length === 2) \r\n                if (touches[0].target && touches[1].target)\r\n                    if (touches[0].target !== touches[1].target) {\r\n                        console.log('Two active elements not supported');\r\n                        return false;\r\n                    }\r\n\r\n            const m = this.matrix;\r\n            this.orig = {\r\n                trans: new Point(m.elements[4], m.elements[5]),\r\n                angle: m.rotation(),\r\n                scale: m.scaling(),\r\n            };\r\n            this.start.scale = this.orig.scale;\r\n            this.started = true;\r\n            this.dragging = false;\r\n\r\n            if (this.events.start)\r\n                this.trigger('start', e);\r\n\r\n            this.setTransition(false);\r\n\r\n            if (e.type === 'mousedown') {\r\n                this.on(document.body, 'mousemove.transformable', _domove);\r\n                this.on(document.body, 'mouseup.transformable dragend.transformable', _dostop);\r\n            }\r\n        };\r\n\r\n        const _domove = e => {\r\n            if (this.options.disabled || !this.element.classList.contains('transformable-active') || !this.started || this.startedresize || this.startedrotate) return false;\r\n            this.dragging = true;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            \r\n            // Note: The logic for containment in this method is extremely complex and has been kept as close to the original as possible during refactoring.\r\n            // Modernizing it further would require a deep re-architecture of the containment algorithm itself.\r\n            const touches = e.touches;\r\n            let doupdate = false;\r\n\r\n            if (touches?.touches.length == 2)\r\n                if (touches[0].target && touches[1].target)\r\n                    if (touches[0].target !== touches[1].target) {\r\n                        console.log('Two active elements not supported');\r\n                        return false;\r\n                    }\r\n\r\n            const m = this.matrix;\r\n            const disable = this.options.disable;\r\n            const docontain = this.options && this.options.contain;\r\n\r\n            const disableZoom = disable?.zoom || disable?.scale;\r\n            const disableRotate = disable?.rotate;\r\n            const disableTranslate = disable?.translate;\r\n\r\n            const point = this._getPoint2(e, touches);\r\n            const orig = this.orig;\r\n            const start = this.start;\r\n            const delta = {\r\n                trans: point.offset.sub(start.offset),\r\n                angle: Math.round((point.angle - start.angle) * 100) / 100,\r\n                distance: start.distance !== 0 ? Math.round(point.distance / ((start.distance + point.distance) / 2) * 1000) / 1000 : 0\r\n            };\r\n\r\n            var that = this;\r\n\r\n            if (docontain && delta.angle == 0 && (!touches || (touches && touches.length == 1))) \r\n            {\r\n                var\r\n                    tl, tr, br, bl;\r\n                var\r\n                    anc = that.Ancestry,\r\n                    parentT = anc.FirstParent(),\r\n                    prect = parentT.rect,\r\n                    inv = m.inverse(),\r\n                    ptl = prect.topleft,\r\n                    ptr = prect.topright,\r\n                    pbr = prect.bottomright,\r\n                    pbl = prect.bottomleft;\r\n\r\n                tl = inv.transformpoint(ptl).sub(delta.trans);\r\n                tr = inv.transformpoint(ptr).sub(delta.trans);\r\n                br = inv.transformpoint(pbr).sub(delta.trans);\r\n                bl = inv.transformpoint(pbl).sub(delta.trans);\r\n\r\n                if (!start.size)\r\n                    start.size = new Point(that._distanceBetweenPoints(tl, tr), that._distanceBetweenPoints(tl, bl));\r\n                else\r\n                    start.size = delta.distance != 0 ?\r\n                        new Point(that._distanceBetweenPoints(tl, tr), that._distanceBetweenPoints(tl, bl))\r\n                        :\r\n                        start.size;\r\n\r\n                var csiz = that.sizes.element.initial;\r\n                \r\n                var containment, opts = that.options;\r\n\r\n                if (docontain == 'enclose') {\r\n                    var enclosed = {\r\n                        tl: that.pointInRectangle(csiz.topleft, tl, tr, br, bl),\r\n                        tr: that.pointInRectangle(csiz.topright, tl, tr, br, bl),\r\n                        br: that.pointInRectangle(csiz.bottomright, tl, tr, br, bl),\r\n                        bl: that.pointInRectangle(csiz.bottomleft, tl, tr, br, bl)\r\n                    };\r\n\r\n                    var containcount = 0;\r\n                    if(enclosed.tl.ok)\r\n                        containcount++;\r\n                    if(enclosed.tr.ok)\r\n                        containcount++;\r\n                    if(enclosed.br.ok)\r\n                        containcount++;\r\n                    if(enclosed.bl.ok)\r\n                        containcount++;\r\n\r\n                    var contained = containcount == 4;\r\n\r\n                    if (!contained) {\r\n                        var quad = that.getRotationQuadrant(start.angle);\r\n                        switch (quad.Quad) {\r\n                            case 0:\r\n                                if (quad.Angle == 0) {\r\n                                    if (!enclosed.br.ok) {\r\n                                        var brv = csiz.bottomright.perpOnLine(tr, br).sub(csiz.bottomright), brh = csiz.bottomright.perpOnLine(bl, br).sub(csiz.bottomright);\r\n                                        if (brv.x < 0) delta.trans = delta.trans.add(brv);\r\n                                        if (brh.y < 0) delta.trans = delta.trans.add(brh);\r\n                                    }\r\n                                    if (!enclosed.tl.ok) {\r\n                                        var tlv = csiz.topleft.perpOnLine(tl, bl), tlh = csiz.topleft.perpOnLine(tl, tr);\r\n                                        if (tlv.x > 0) delta.trans = delta.trans.add(tlv);\r\n                                        if (tlh.y > 0) delta.trans = delta.trans.add(tlh);\r\n                                    }\r\n                                } else {\r\n                                    if (!enclosed.bl.ok) {\r\n                                        var blv = csiz.bottomleft.perpOnLine(tl, bl).sub(csiz.bottomleft); //,\r\n\r\n                                        if (blv.x > 0) delta.trans = delta.trans.add(blv);\r\n                                    }\r\n                                    if (!enclosed.br.ok) {\r\n                                        var\r\n                                            brh = csiz.bottomright.perpOnLine(bl, br).sub(csiz.bottomright);\r\n                                        if (brh.y < 0) delta.trans = delta.trans.add(brh);\r\n                                    }\r\n                                    if (!enclosed.tr.ok) {\r\n                                        var trv = csiz.topright.perpOnLine(tr, br).sub(csiz.topright); //,\r\n                                        if (trv.x < 0) delta.trans = delta.trans.add(trv);\r\n                                    }\r\n                                    if (!enclosed.tl.ok) {\r\n                                        var tlh = csiz.topleft.perpOnLine(tl, tr);\r\n                                        if (tlh.y > 0) delta.trans = delta.trans.add(tlh);\r\n                                    }\r\n                                }\r\n                                break;\r\n                            case 3:\r\n                                if (quad.Angle == 270) {\r\n                                    if (!enclosed.tl.ok) {\r\n                                        var tlh = csiz.topleft.perpOnLine(tl, bl),\r\n                                            tlv = csiz.topleft.perpOnLine(bl, br);\r\n                                        if (tlv.x > 0) delta.trans = delta.trans.add(tlv);\r\n                                        if (tlh.y > 0) delta.trans = delta.trans.add(tlh);\r\n                                    }\r\n                                    if (!enclosed.br.ok) {\r\n                                        var\r\n                                            brv = csiz.bottomright.perpOnLine(tl, tr).sub(csiz.bottomright),\r\n                                            brh = csiz.bottomright.perpOnLine(br, tr).sub(csiz.bottomright);\r\n                                        if (brv.x < 0) delta.trans = delta.trans.add(brv);\r\n                                        if (brh.y < 0) delta.trans = delta.trans.add(brh);\r\n                                    }\r\n                                } else {\r\n                                    if (!enclosed.tl.ok) {\r\n                                        var tlv = csiz.topleft.perpOnLine(tl, bl);\r\n                                        if (tlv.x > 0) delta.trans = delta.trans.add(tlv);\r\n                                    }\r\n                                    if (!enclosed.br.ok) {\r\n                                        var brv = csiz.bottomright.perpOnLine(tr, br).sub(csiz.bottomright);\r\n                                        if (brv.x < 0) delta.trans = delta.trans.add(brv);\r\n                                    }\r\n                                    if (!enclosed.tr.ok) {\r\n                                        var trh = csiz.topright.perpOnLine(tl, tr).sub(csiz.topright);\r\n                                        if (trh.y > 0) delta.trans = delta.trans.add(trh);\r\n                                    }\r\n                                    if (!enclosed.bl.ok) {\r\n                                        var blh = csiz.bottomleft.perpOnLine(bl, br).sub(csiz.bottomleft);\r\n                                        if (blh.y < 0) delta.trans = delta.trans.add(blh);\r\n                                    }\r\n                                }\r\n                                break;\r\n                            case 1:\r\n                                if (quad.Angle == 90) { // can get away with 2 perp calcs instead of 4;\r\n                                    if (!enclosed.tl.ok) {\r\n                                        var tlv = csiz.topleft.perpOnLine(tr, tl),\r\n                                            tlh = csiz.topleft.perpOnLine(tr, br);\r\n\r\n                                        if (tlv.x > 0) delta.trans = delta.trans.add(tlv);\r\n                                        if (tlh.y > 0) delta.trans = delta.trans.add(tlh);\r\n                                    }\r\n                                    if (!enclosed.br.ok) {\r\n                                        var brv = csiz.bottomright.perpOnLine(br, bl).sub(csiz.bottomright),\r\n                                            brh = csiz.bottomright.perpOnLine(tl, bl).sub(csiz.bottomright);\r\n\r\n                                        if (brv.x < 0) delta.trans = delta.trans.add(brv);\r\n                                        if (brh.y < 0) delta.trans = delta.trans.add(brh);\r\n                                    }\r\n                                } else {\r\n                                    if (!enclosed.tl.ok) {\r\n                                        var tlv = csiz.topleft.perpOnLine(tr, br);\r\n                                        if (tlv.x > 0) delta.trans = delta.trans.add(tlv);\r\n                                    }\r\n                                    if (!enclosed.br.ok) {\r\n                                        var brv = csiz.bottomright.perpOnLine(tl, bl).sub(csiz.bottomright);\r\n                                        if (brv.x < 0) delta.trans = delta.trans.add(brv);\r\n                                    }\r\n                                    if (!enclosed.tr.ok) {\r\n                                        var trh = csiz.topright.perpOnLine(bl, br).sub(csiz.topright);\r\n                                        if (trh.y > 0) delta.trans = delta.trans.add(trh);\r\n                                    }\r\n                                    if (!enclosed.bl.ok) {\r\n                                        var blh = csiz.bottomleft.perpOnLine(tr, tl).sub(csiz.bottomleft);\r\n                                        if (blh.y < 0) delta.trans = delta.trans.add(blh);\r\n                                    }\r\n                                }\r\n                                break;\r\n                            case 2:\r\n                                if (quad.Angle == 180) { // can get away with 2 calcs instead of 4;\r\n                                    if (!enclosed.tl.ok) {\r\n                                        var tlv = csiz.topleft.perpOnLine(br, bl),\r\n                                            tlh = csiz.topleft.perpOnLine(tl, bl);\r\n                                        if (tlv.y > 0) delta.trans = delta.trans.add(tlv);\r\n                                        if (tlh.y > 0) delta.trans = delta.trans.add(tlh);\r\n                                    }\r\n                                    if (!enclosed.br.ok) {\r\n                                        var\r\n                                            brv = csiz.bottomright.perpOnLine(tr, tl).sub(csiz.bottomright),\r\n                                            brh = csiz.bottomright.perpOnLine(tr, br).sub(csiz.bottomright);\r\n                                        if (brv.y < 0) delta.trans = delta.trans.add(brv);\r\n                                        if (brh.y < 0) delta.trans = delta.trans.add(brh);\r\n                                    }\r\n                                }\r\n                                if (!enclosed.tl.ok) {\r\n                                    var tlv = csiz.topleft.perpOnLine(br, bl);\r\n                                    if (tlv.y > 0) delta.trans = delta.trans.add(tlv);\r\n                                }\r\n                                if (!enclosed.br.ok) {\r\n                                    var brv = csiz.bottomright.perpOnLine(tr, tl).sub(csiz.bottomright);//,\r\n                                    if (brv.y < 0) delta.trans = delta.trans.add(brv);\r\n                                }\r\n\r\n                                if (!enclosed.tr.ok) {\r\n                                    var trh = csiz.topright.perpOnLine(tl, bl).sub(csiz.topright);\r\n                                    if (trh.x < 0) delta.trans = delta.trans.add(trh);\r\n                                }\r\n                                if (!enclosed.bl.ok) {\r\n                                    var blh = csiz.bottomleft.perpOnLine(tr, br).sub(csiz.bottomleft);\r\n                                    if (blh.x > 0) delta.trans = delta.trans.add(blh);\r\n                                }\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n                if (docontain == 'cover') {\r\n                    var enclosed = {\r\n                        tl: that.pointInRectangle(csiz.topleft, tl, tr, br, bl),\r\n                        tr: that.pointInRectangle(csiz.topright, tl, tr, br, bl),\r\n                        br: that.pointInRectangle(csiz.bottomright, tl, tr, br, bl),\r\n                        bl: that.pointInRectangle(csiz.bottomleft, tl, tr, br, bl)\r\n                    };\r\n\r\n                    var okcorners = 0;\r\n                    if (!enclosed.tl.ok) okcorners++;\r\n                    if (!enclosed.tr.ok) okcorners++;\r\n                    if (!enclosed.br.ok) okcorners++;\r\n                    if (!enclosed.bl.ok) okcorners++;\r\n\r\n                    if ((!enclosed.tl.ok &&\r\n                        !enclosed.tr.ok &&\r\n                        !enclosed.br.ok &&\r\n                        !enclosed.bl.ok\r\n                        )||that.lockcontain||(okcorners == 3 && start.angle == 0)) {\r\n                        that.lockcontain = true;\r\n                        var quad = that.getRotationQuadrant(start.angle);\r\n                        switch (quad.Quad) {\r\n                            case 0:\r\n                                if (tr.y <= 0)\r\n                                    delta.trans.y = delta.trans.y + tr.y;\r\n                                if (bl.y >= csiz.bottomleft.y)\r\n                                    delta.trans.y = delta.trans.y + (bl.y - csiz.bottomleft.y);\r\n                                if (br.x >= csiz.bottomright.x)\r\n                                    delta.trans.x = delta.trans.x + (br.x - csiz.bottomright.x);\r\n                                if (tl.x <= 0)\r\n                                    delta.trans.x = delta.trans.x + tl.x;\r\n                                break;\r\n                            case 1:\r\n                                if (tl.y >= csiz.bottomleft.y)\r\n                                    delta.trans.y = delta.trans.y + (tl.y - csiz.bottomleft.y);\r\n                                if (bl.x >= csiz.topright.x)\r\n                                    delta.trans.x = delta.trans.x - (csiz.topright.x - bl.x);\r\n                                if (br.y <= 0) // works\r\n                                    delta.trans.y = delta.trans.y + br.y;\r\n                                if (tr.x <= 0)\r\n                                    delta.trans.x = delta.trans.x + tr.x;\r\n                                break;\r\n                            case 2:\r\n                                if (bl.y <= 0) // works\r\n                                    delta.trans.y = delta.trans.y + bl.y;\r\n                                if (tl.x >= csiz.bottomright.x)\r\n                                    delta.trans.x = delta.trans.x - (csiz.bottomright.x - tl.x);\r\n                                if (tr.y >= csiz.bottomleft.y)\r\n                                    delta.trans.y = delta.trans.y + (tr.y - csiz.bottomleft.y);\r\n                                if (br.x <= 0)\r\n                                    delta.trans.x = delta.trans.x + br.x;\r\n                                //console.log('points')\r\n                                //console.log(tl)\r\n                                //console.log(tr)\r\n                                //console.log(br)\r\n                                //console.log(bl)\r\n                                break;\r\n                            case 3:\r\n                                if (tl.y <= 0) // works\r\n                                    delta.trans.y = delta.trans.y + tl.y;\r\n                                if (bl.x <= 0)\r\n                                    delta.trans.x = delta.trans.x + bl.x;\r\n                                if (br.y >= csiz.bottomright.y) // works\r\n                                    delta.trans.y = delta.trans.y + (br.y - csiz.bottomright.y);\r\n                                if (tr.x >= csiz.topright.x)\r\n                                    delta.trans.x = delta.trans.x - (csiz.topright.x - tr.x);\r\n\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (delta.trans.nonzero() && !disableTranslate) {\r\n                m.translate(delta.trans);\r\n                doupdate = true;\r\n                that.delta.x += delta.trans.x;\r\n                that.delta.y += delta.trans.y;\r\n            }\r\n\r\n            if (delta.distance != 0 && delta.distance != 1 && touches)\r\n                if (touches.length == 2 && !disableZoom) {\r\n                    m.scale(point.offset, delta.distance);\r\n\r\n                    doupdate = true;\r\n\r\n                }\r\n\r\n            if (delta.angle != 0 && !disableRotate) {\r\n                m.rotateAboutPoint(point.offset, delta.angle);\r\n                doupdate = true;\r\n            }\r\n\r\n            if (doupdate)\r\n                that._updateElement(m);\r\n\r\n            that.start.angle = point.angle;\r\n\r\n            if (that.events.move)\r\n                that.trigger('move', e);\r\n\r\n            return false;\r\n\r\n        };\r\n        \r\n        const _dostop = e => {\r\n            this.off(document.body, 'mousemove.transformable', _domove);\r\n            this.off(document.body, 'mouseup.transformable dragend.transformable', _dostop);\r\n\r\n            this.element.classList.remove('transformable-active', 'transformable-reset');\r\n\r\n            if (this.options.disabled) return false;\r\n\r\n            this.lockcontain = false;\r\n            if (this.started && this.dragging) {\r\n                this._pushhistory();\r\n                this.snapRotation();\r\n            }\r\n            if (this.started && !this.dragging) {\r\n                this.trigger('tap', e);\r\n            }\r\n            this.dragging = false;\r\n            this.started = false;\r\n            if (this.events.stop)\r\n                this.trigger('stop', e);\r\n\r\n            this.setTransition(true);\r\n\r\n            // Scale handles on stop\r\n            \r\n            var that = this;\r\n            var\r\n                rb = that.rotatorBox,\r\n                tlb = that.resizertl,\r\n                brb = that.resizerbr;\r\n\r\n            if (rb) {\r\n                var nsc = that.matrix.scaling();\r\n                rb.scale(new Point(0), (1 / rb.matrix.scaling()) * (1 / nsc));\r\n            }\r\n            if (tlb && brb) {\r\n                var nscc = nsc || that.matrix.scaling(); //,\r\n\r\n                tlb.style.transform = 'scale(' + (1 / nscc) + ')';\r\n                brb.style.transform = 'scale(' + (1 / nscc) + ')';\r\n            }\r\n        };\r\n        \r\n        const _dowheelzoom = e => {\r\n            if (this.options.disabled || this.startedresize || this.startedrotate || this.options.type === 'rotator-box') return false;\r\n            \r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            const now = Date.now();\r\n            const dmw = this.lastwheelmove ? now - this.lastwheelmove : 150;\r\n\r\n            if (dmw < 150 && navigator.userAgent.includes('Mac')) return false;\r\n            \r\n            if (!document.querySelector('.transformable-active')) {\r\n                this.element.classList.add('transformable-active');\r\n            }\r\n            if (this.rotatorBox) {\r\n                this.rotatorBox.parent.classList.add('transformable-wheel-active');\r\n            }\r\n            if (this._wheelTimer) clearTimeout(this._wheelTimer);\r\n\r\n            const point = this._getPoint2(e);\r\n            const m = this.matrix;\r\n            \r\n            this.setTransition(true);\r\n\r\n            if (point.deltaXY.y !== 0) {\r\n                const acc = point.deltaXY.y < 0 ? 1 : -1;\r\n                const ds = 1 + (0.05 * acc);\r\n                m.scale(point.offset, ds);\r\n                this._updateElement();\r\n            }\r\n            this.element.classList.remove('transformable-active');\r\n\r\n            this._wheelTimer = setTimeout(() => {\r\n                this._pushhistory();\r\n                if (this.rotatorBox) {\r\n                    this.rotatorBox.parent.classList.remove('transformable-wheel-active');\r\n                }\r\n            }, 750);\r\n            this.lastwheelmove = now;\r\n        };\r\n\r\n        this.on(this.element, 'mousedown.transformable', _dostart);\r\n        this.on(this.element, 'touchstart.transformable', _dostart);\r\n        this.on(this.element, 'touchmove.transformable', _domove);\r\n        this.on(this.element, 'touchend.transformable', _dostop);\r\n        \r\n        this.on(this.element, 'scroll.transformable', e => { \r\n            console.log('tried scroll');\r\n            e.preventDefault(); e.stopPropagation(); return false; \r\n        });\r\n\r\n        if (!this.options.disable || this.options.disable?.wheel)\r\n            if (!navigator.userAgent.includes('Mac OS')) // some issues with wild zoom on magic mouse, so turn it off\r\n                addWheelListener(this.element, _dowheelzoom);\r\n    }\r\n\r\n    /**\r\n     * attaches events to an element\r\n     * @param {HTMLElement} el The element to attach the event to\r\n     * @param {String} event Type of event with optional namespace. E.g. touchstart.mynamespace\r\n     * @param {Function} func Handler function\r\n     * @param {Object} opts Options to use when attaching the event\r\n     */\r\n    on(el, event, func, opts) {\r\n        //const events = event.split(' ');\r\n        //for (const evt of events) {\r\n        //    const [ev, ns] = evt.split('.');\r\n        //    el.addEventListener(ev, func, opts || false);\r\n\r\n        //    Transformable.Handlers.Namespaces[evt] = Transformable.Handlers.Namespaces[evt] || [];\r\n        //    if (ns) Transformable.Handlers.Namespaces[ns] = Transformable.Handlers.Namespaces[ns] || [];\r\n            \r\n        //    const handler = { event: ev, func, opts: opts || false };\r\n        //    Transformable.Handlers.Namespaces[evt].push(handler);\r\n        //    if (ns) Transformable.Handlers.Namespaces[ns].push(handler);\r\n        //}\r\n\r\n        var events = event.split(' '), i, sp, ev, ns, pl;\r\n        for (i = 0; i < events.length; i++) {\r\n            sp = events[i].split('.'), ev = sp[0], ns = sp.length > 1 ? sp[1] : false;\r\n            el.addEventListener(ev, func, opts || false);\r\n\r\n            if (!Transformable.Handlers.Namespaces[event])\r\n                Transformable.Handlers.Namespaces[event] = [];\r\n\r\n            if (ns)\r\n                if (!Transformable.Handlers.Namespaces[ns])\r\n                    Transformable.Handlers.Namespaces[ns] = [];\r\n\r\n            pl = Transformable.Handlers.Namespaces[event].push({ event: ev, func: func, opts: opts || false });\r\n            if (ns)\r\n                Transformable.Handlers.Namespaces[ns].push(Transformable.Handlers.Namespaces[event][pl - 1]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Removes an event previously added with .on(...)\r\n     * @param {HTMLElement} el The element to remove the event from\r\n     * @param {String} event Handler function to remove\r\n     * @param {Object} opts Options to use when removing the event\r\n     */\r\n    off(el, event, opts) {\r\n        const handlers = Transformable.Handlers.Namespaces[event];\r\n        if (handlers) {\r\n            for (const handler of handlers) {\r\n                el.removeEventListener(handler.event, handler.func, handler.opts || false);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Resets/updates the instance.\r\n     */\r\n    Refresh() {\r\n        this.sizes = undefined;\r\n        this.setInitialSizes();\r\n        this.Ancestry.Refresh();\r\n    }\r\n};\r\n\r\n(() => {        \r\n    let timer;\r\n    const refreshtransformables = () => { \r\n        document.querySelectorAll('.transformable').forEach(v => {\r\n            const i = v.getAttribute('data-transformable-id');\r\n            const t = i ? Transformable.Instance[i] : null;\r\n\r\n            if (t instanceof Transformable) {\r\n                t.Refresh();\r\n            }\r\n        });\r\n    };\r\n    \r\n    window.addEventListener('resize', () => {\r\n        clearTimeout(timer);\r\n        timer = setTimeout(refreshtransformables, 150);\r\n    });\r\n})();\r\n// Ensure Transformable is available as a global for UMD/browser builds\r\nif (typeof window !== 'undefined') {\r\n  window.Transformable = Transformable;\r\n}\r\nexport default Transformable;"],"names":["Point","x","y","arguments","length","undefined","_classCallCheck","_createClass","key","value","scale","factor","round","precision","Math","pow","sub","p","add","mult","divide","nonzero","equals","moreoreq","lessoreq","dot","perpOnLine","p1","p2","k","x4","y4","mag","sqrt","Matrix","a","Identity","Array","elements","slice","i","push","Error","history","undo","redo","prototype","transformpoint","pt","m","multiply","els","me","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","elementsequal","b","save","h","last","l","len","cur","pop","prev","unshift","identity","reset","determinant","inverse","dt","invert","isIdentity","translate","s","dp","rotateAboutPoint","r","PI","cos","sin","rotate","normaldegree","rotation","norm","atan2","scaling","translation","Ancestry","self","Items","_add","element","Self","_init","_getScroll","window","pageXOffset","document","documentElement","scrollLeft","pageYOffset","scrollTop","GetElementSize","el","cs","getComputedStyle","left","parseFloat","top","w","width","height","offset","topleft","topright","bottomright","bottomleft","_debug","forEach","v","console","log","matrix","Refresh","_ispercent","indexOf","_isauto","_pixelFromParent","val","GetComputedDims","cmt","marginTop","cml","marginLeft","cl","ct","leftp","topp","pf","t","pcs","parentNode","transform","has","tid","nm","body","test","margintop","marginleft","classList","contains","getAttribute","Transformable","Instance","om","_cssStringToArray","prect","style","transformOrigin","_arrayToCssString","_setoffset","scroll","trans","transformable","rect","sizes","initial","GetParents","ti","Inverse","Element","TransformCorners","c","mat","GetMatrix","FirstParent","par","OffsetFromPoint","pars","op","matinv","prefix","_addEventListener","addEventListener","support","createElement","onmousewheel","addWheelListener","elem","callback","useCapture","_addWheelListener","targetElem","eventName","cb","capture","originalEvent","event","normalizedEvent","target","srcElement","type","deltaMode","deltaX","deltaY","deltaZ","preventDefault","returnValue","stopPropagation","wheelDelta","wheelDeltaX","detail","_opts$attachevents","opts","options","parent","setInitialSizes","_opts$computedsize","_opts$computedsize2","cscale","computedsize","Width","precs","Height","curcs","isArray","_setMatrix","_getMatrix","originalTransition","_getOriginalTransition","_setOffset","dragging","start","orig","zooma","events","move","stop","tap","transition","setAttribute","navigator","userAgent","includes","attachevents","editable","_opts$disable","_addEvents","resize","createResizeHandles","disable","createRotateHandles","handle","_addRotateEvents","split","filter","part","trim","startsWith","join","tag","str","innerHTML","firstChild","typ","_this","box","rot","anc","lin","append","nodeName","appendChild","e","rotatorBox","rotatetarget","zoom","_domouseup","_this$rotatorBox","remove","off","_domousedown","on","_domouseleave","_overTimer","clearTimeout","_resizeTimer","setTimeout","currentTarget","_domouseenter","tim","rb","rotparent","call","tl_svg","br_svg","tlb","brb","cloneNode","resizertl","resizerbr","_addResizeEvents","dir","_findCentreInWindow","setTransition","_updateElement","inwindow","rotationPoint","lastrotationpoint","straighten","fittoparent","sz","parentT","pr","tl","tr","bl","psiz","_distanceBetweenPoints","sc","min","centreinparent","filltoparent","max","_getRect","getBoundingClientRect","_this2","InitialMatrix","_toConsumableArray","_this$delta","_this$delta2","delta","hasHistoryKey","_getOffset","cr","pos","os","br","right","bottom","too","initialoffset","match","map","concat","csTop","csLeft","borderTopWidth","borderLeftWidth","bordertop","borderleft","mElements","Object","assign","bool","currentSplits","_pushhistory","_getPageXY","touches","xy","ang","_getMiddle","_getRotation","pageX","pageY","point","angle","_getPoint2","dat","dist","deltaXY","pageXY","distance","prop","abs","_touches","_slicedToArray","touch1","touch2","mx","my","_getDistance2","parentElements","t1","t2","snapRotation","_this$options$disable","am","siz","lastlastrotationpoint","msg","showMessage","was","parentCentre","centreOnThis","pointInRectangle","d","ab","ap","bc","bp","dot_abap","dot_abab","dot_bcbp","dot_bcbc","ok","trigger","n","_getRotatorPoints","rpoint","apoint","anchor","TL","hdl","_this3","_dostart","disabled","startedresize","querySelectorAll","origrotate","clientRect","querySelector","startrotate","startedrotate","draggingrotate","_domove","_dostop","_e$touches","_this4","_this4$contained","origresize","startresize","draggingresize","contained","_e$touches2","dw","dh","neww","newh","getRotationQuadrant","normalizedRot","Angle","Quad","floor","Horiz","Vert","_this5","_this$options$disable2","closest","ww","started","doupdate","docontain","contain","disableZoom","disableRotate","disableTranslate","that","inv","ptl","ptr","pbr","pbl","size","csiz","containment","enclosed","containcount","quad","brv","brh","tlv","tlh","blv","trv","trh","blh","okcorners","lockcontain","nsc","nscc","_dowheelzoom","now","Date","dmw","lastwheelmove","_wheelTimer","acc","ds","wheel","func","sp","ev","ns","pl","Handlers","Namespaces","handlers","_iterator","_createForOfIteratorHelper","_step","done","handler","removeEventListener","err","f","_defineProperty","timer","refreshtransformables"],"sourceRoot":""}